{"version":3,"file":"TasksPageWithBulkOps-d7ea9900.js","sources":["../../../node_modules/lucide-react/dist/esm/icons/calendar-days.js","../../../node_modules/lucide-react/dist/esm/icons/undo-2.js","../../../src/pages/TasksPageWithBulkOps.tsx"],"sourcesContent":["/**\n * @license lucide-react v0.344.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst CalendarDays = createLucideIcon(\"CalendarDays\", [\n  [\"path\", { d: \"M8 2v4\", key: \"1cmpym\" }],\n  [\"path\", { d: \"M16 2v4\", key: \"4m81vk\" }],\n  [\"rect\", { width: \"18\", height: \"18\", x: \"3\", y: \"4\", rx: \"2\", key: \"1hopcy\" }],\n  [\"path\", { d: \"M3 10h18\", key: \"8toen8\" }],\n  [\"path\", { d: \"M8 14h.01\", key: \"6423bh\" }],\n  [\"path\", { d: \"M12 14h.01\", key: \"1etili\" }],\n  [\"path\", { d: \"M16 14h.01\", key: \"1gbofw\" }],\n  [\"path\", { d: \"M8 18h.01\", key: \"lrp35t\" }],\n  [\"path\", { d: \"M12 18h.01\", key: \"mhygvu\" }],\n  [\"path\", { d: \"M16 18h.01\", key: \"kzsmim\" }]\n]);\n\nexport { CalendarDays as default };\n//# sourceMappingURL=calendar-days.js.map\n","/**\n * @license lucide-react v0.344.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Undo2 = createLucideIcon(\"Undo2\", [\n  [\"path\", { d: \"M9 14 4 9l5-5\", key: \"102s5s\" }],\n  [\"path\", { d: \"M4 9h10.5a5.5 5.5 0 0 1 5.5 5.5v0a5.5 5.5 0 0 1-5.5 5.5H11\", key: \"llx8ln\" }]\n]);\n\nexport { Undo2 as default };\n//# sourceMappingURL=undo-2.js.map\n","import React, { useState, useEffect, useRef } from 'react';\nimport { useLocation } from 'react-router-dom';\nimport { useAppContext } from '../context/AppContextSupabase';\nimport { Task, TaskSortMode, WhatNowCriteria } from '../types';\nimport { TaskDisplay } from '../components/TaskDisplay';\nimport TaskFormWithDependencies from '../components/tasks/TaskFormWithDependencies';\nimport AITaskBreakdown from '../components/tasks/AITaskBreakdown';\nimport Modal from '../components/common/Modal';\nimport Button from '../components/common/Button';\nimport Card from '../components/common/Card';\nimport Empty from '../components/common/Empty';\nimport { QuickCapture } from '../components/tasks/QuickCapture';\nimport { \n  Plus, Filter, X, Undo2, Archive, \n  AlertTriangle, CalendarDays, Calendar, Layers, \n  Trash2, CheckCircle2, Folder, FileArchive,\n  ArrowUpDown, Clock, Star, Hash, FolderOpen, Tag,\n  Zap, Brain, Timer, Battery\n} from 'lucide-react';\nimport { formatDate, getOverdueTasks, getTasksDueToday, getTasksDueThisWeek } from '../utils/helpers';\nimport { DeletedTask, getDeletedTasks, restoreDeletedTask, permanentlyDeleteTask } from '../utils/localStorage';\nimport { sortTasks as smartSortTasks, SortMode, EnergyLevel, getFilteredCounts, getSortModeInfo } from '../utils/taskPrioritization';\n\ninterface BulkTaskCardProps {\n  task: Task;\n  isSelected: boolean;\n  onSelectChange: (selected: boolean) => void;\n  onEdit: (task: Task) => void;\n  onDelete: (taskId: string) => void;\n  onBreakdown?: (task: Task) => void;\n}\n\nconst BulkTaskCard: React.FC<BulkTaskCardProps> = ({ \n  task, \n  isSelected, \n  onSelectChange,\n  onEdit,\n  onDelete,\n  onBreakdown\n}) => {\n  const { updateTask } = useAppContext();\n  \n  return (\n    <div className=\"relative\">\n      {/* Selection checkbox for bulk operations */}\n      <div className=\"absolute left-2 top-4 z-10\">\n        <input\n          type=\"checkbox\"\n          checked={isSelected}\n          onChange={(e) => onSelectChange(e.target.checked)}\n          className=\"h-4 w-4 text-indigo-600 border-gray-300 rounded focus:ring-indigo-500\"\n        />\n      </div>\n      \n      {/* Task display with padding for checkbox */}\n      <div className={isSelected ? 'ml-8' : 'ml-8'}>\n        <TaskDisplay\n          task={task}\n          onToggle={() => updateTask({ ...task, completed: !task.completed })}\n          onEdit={onEdit}\n          onDelete={onDelete}\n          onBreakdown={onBreakdown}\n        />\n      </div>\n    </div>\n  );\n};\n\nconst TasksPageWithBulkOps: React.FC = () => {\n  const location = useLocation();\n  const { \n    tasks, \n    projects, \n    categories, \n    deleteTask, \n    undoDelete, \n    hasRecentlyDeleted, \n    archiveCompletedTasks,\n    bulkDeleteTasks,\n    bulkCompleteTasks,\n    bulkMoveTasks,\n    bulkArchiveTasks,\n    bulkAddTasks,\n    bulkConvertToSubtasks,\n    bulkAssignCategories\n  } = useAppContext();\n  \n  // Get initial tab from URL query params\n  const searchParams = new URLSearchParams(location.search);\n  const tabParam = searchParams.get('tab') as 'today' | 'tomorrow' | 'week' | 'overdue' | 'all' | null;\n  const categoryIdParam = searchParams.get('categoryId');\n  const initialTab = tabParam || 'all';\n  \n  const [isModalOpen, setIsModalOpen] = useState(false);\n  const [editingTask, setEditingTask] = useState<Task | null>(null);\n  const [showUndoNotification, setShowUndoNotification] = useState(false);\n  const [showArchiveConfirm, setShowArchiveConfirm] = useState(false);\n  const [showBulkActions, setShowBulkActions] = useState(false);\n  const [selectedTasks, setSelectedTasks] = useState<Set<string>>(new Set());\n  const [showBulkMoveModal, setShowBulkMoveModal] = useState(false);\n  const [selectedProjectForMove, setSelectedProjectForMove] = useState<string | null>(null);\n  const [breakdownTask, setBreakdownTask] = useState<Task | null>(null);\n  const [showConvertToSubtasksModal, setShowConvertToSubtasksModal] = useState(false);\n  const [selectedParentTaskId, setSelectedParentTaskId] = useState<string | null>(null);\n  const [, setDeletedTasks] = useState<DeletedTask[]>([]);\n  const [showBulkCategoryModal, setShowBulkCategoryModal] = useState(false);\n  const [selectedCategoryIdsForBulk, setSelectedCategoryIdsForBulk] = useState<string[]>([]);\n  const [categoryAssignMode, setCategoryAssignMode] = useState<'add' | 'replace'>('add');\n  \n  // Filter state\n  const [showCompleted, setShowCompleted] = useState(false);\n  const [showArchived, setShowArchived] = useState(false);\n  const [filterProjectId, setFilterProjectId] = useState<string | null>(null);\n  const [filterCategoryId, setFilterCategoryId] = useState<string | null>(categoryIdParam);\n  const [isFilterOpen, setIsFilterOpen] = useState(false);\n  \n  // View state\n  const [activeTab, setActiveTab] = useState<'today' | 'tomorrow' | 'week' | 'overdue' | 'all' | 'deleted'>(initialTab);\n  \n  // Sort state\n  type SortOption = 'dueDate' | 'priority' | 'createdAt' | 'title' | 'estimatedMinutes' | 'project';\n  type SortDirection = 'asc' | 'desc';\n  const [sortBy, setSortBy] = useState<SortOption>('dueDate');\n  const [sortDirection, setSortDirection] = useState<SortDirection>('asc');\n  const [showSortMenu, setShowSortMenu] = useState(false);\n  const sortMenuRef = useRef<HTMLDivElement>(null);\n  \n  // Smart sorting state\n  const [smartSortMode, setSmartSortMode] = useState<SortMode>('smart');\n  const [currentEnergy, setCurrentEnergy] = useState<EnergyLevel>('medium');\n  const [showSmartSort, setShowSmartSort] = useState(false);\n  \n  // Show undo notification when a task is deleted\n  useEffect(() => {\n    if (hasRecentlyDeleted) {\n      setShowUndoNotification(true);\n      const timer = setTimeout(() => {\n        setShowUndoNotification(false);\n      }, 5000);\n      return () => clearTimeout(timer);\n    }\n  }, [hasRecentlyDeleted]);\n  \n  // Load deleted tasks when tab changes\n  useEffect(() => {\n    if (activeTab === 'deleted') {\n      loadDeletedTasks();\n    }\n  }, [activeTab]);\n  \n  // Close sort menu when clicking outside\n  useEffect(() => {\n    const handleClickOutside = (event: MouseEvent) => {\n      if (sortMenuRef.current && !sortMenuRef.current.contains(event.target as Node)) {\n        setShowSortMenu(false);\n      }\n    };\n    \n    if (showSortMenu) {\n      document.addEventListener('mousedown', handleClickOutside);\n    }\n    \n    return () => {\n      document.removeEventListener('mousedown', handleClickOutside);\n    };\n  }, [showSortMenu]);\n  \n  const loadDeletedTasks = () => {\n    const deleted = getDeletedTasks();\n    setDeletedTasks(deleted.sort((a, b) => \n      new Date(b.deletedAt).getTime() - new Date(a.deletedAt).getTime()\n    ));\n  };\n  \n  // const handleRestoreTask = (taskId: string) => {\n  //   const restoredTask = restoreDeletedTask(taskId);\n  //   if (restoredTask) {\n  //     loadDeletedTasks();\n  //     // The context will automatically update with the restored task\n  //   }\n  // };\n  \n  // const handlePermanentlyDeleteTask = (taskId: string) => {\n  //   permanentlyDeleteTask(taskId);\n  //   loadDeletedTasks();\n  // };\n  \n  const handleOpenModal = (task?: Task) => {\n    if (task) {\n      setEditingTask(task);\n    } else {\n      setEditingTask(null);\n    }\n    setIsModalOpen(true);\n  };\n  \n  const handleCloseModal = () => {\n    setIsModalOpen(false);\n    setEditingTask(null);\n  };\n  \n  const handleDeleteTask = (taskId: string) => {\n    deleteTask(taskId);\n  };\n  \n  const handleUndo = () => {\n    undoDelete();\n    setShowUndoNotification(false);\n  };\n  \n  const toggleFilter = () => {\n    setIsFilterOpen(!isFilterOpen);\n  };\n  \n  const clearFilters = () => {\n    setShowCompleted(false);\n    setShowArchived(false);\n    setFilterProjectId(null);\n    setFilterCategoryId(null);\n  };\n\n  const handleArchiveConfirmOpen = () => {\n    const completedTasks = tasks.filter(task => task.completed && !task.archived);\n    if (completedTasks.length > 0) {\n      setShowArchiveConfirm(true);\n    }\n  };\n\n  const handleArchiveConfirmClose = () => {\n    setShowArchiveConfirm(false);\n  };\n\n  const handleArchiveCompleted = () => {\n    archiveCompletedTasks();\n    setShowArchiveConfirm(false);\n  };\n  \n  const handleBreakdown = (task: Task) => {\n    setBreakdownTask(task);\n  };\n  \n  const handleBreakdownAccept = async (subtasks: Partial<Task>[]) => {\n    if (breakdownTask) {\n\n      // Prepare all subtasks with parentTaskId and other inherited fields\n      const preparedSubtasks = subtasks.map((subtask) => ({\n        ...subtask,\n        parentTaskId: breakdownTask.id,\n        projectId: breakdownTask.projectId,\n        categoryIds: breakdownTask.categoryIds || [],\n        dueDate: subtask.dueDate || breakdownTask.dueDate || null,\n        priority: subtask.priority || breakdownTask.priority || 'medium',\n        energyLevel: subtask.energyLevel || breakdownTask.energyLevel,\n        estimatedMinutes: subtask.estimatedMinutes,\n        tags: subtask.tags || [],\n      }));\n\n      bulkAddTasks(preparedSubtasks);\n\n      setBreakdownTask(null);\n    }\n  };\n  \n  const handleBreakdownClose = () => {\n    setBreakdownTask(null);\n  };\n  \n  // Bulk operations\n  const toggleTaskSelection = (taskId: string) => {\n    const newSelection = new Set(selectedTasks);\n    if (newSelection.has(taskId)) {\n      newSelection.delete(taskId);\n    } else {\n      newSelection.add(taskId);\n    }\n    setSelectedTasks(newSelection);\n  };\n  \n  const selectAllVisibleTasks = () => {\n    const visibleTaskIds = new Set(getActiveTaskList().map(task => task.id));\n    setSelectedTasks(visibleTaskIds);\n  };\n  \n  const deselectAllTasks = () => {\n    setSelectedTasks(new Set());\n  };\n  \n  const handleBulkDelete = () => {\n    if (selectedTasks.size > 0) {\n      bulkDeleteTasks(Array.from(selectedTasks));\n      setSelectedTasks(new Set());\n    }\n  };\n  \n  const handleBulkComplete = () => {\n    if (selectedTasks.size > 0) {\n      bulkCompleteTasks(Array.from(selectedTasks));\n      setSelectedTasks(new Set());\n    }\n  };\n  \n  const handleBulkMove = () => {\n    setShowBulkMoveModal(true);\n  };\n  \n  const executeBulkMove = () => {\n    if (selectedTasks.size > 0) {\n      bulkMoveTasks(Array.from(selectedTasks), selectedProjectForMove);\n      setSelectedTasks(new Set());\n      setShowBulkMoveModal(false);\n      setSelectedProjectForMove(null);\n    }\n  };\n  \n  const handleBulkArchive = () => {\n    if (selectedTasks.size > 0) {\n      bulkArchiveTasks(Array.from(selectedTasks));\n      setSelectedTasks(new Set());\n    }\n  };\n  \n  const handleBulkConvertToSubtasks = () => {\n    setShowConvertToSubtasksModal(true);\n  };\n  \n  const executeBulkConvertToSubtasks = () => {\n    if (selectedTasks.size > 0 && selectedParentTaskId) {\n      bulkConvertToSubtasks(Array.from(selectedTasks), selectedParentTaskId);\n      setSelectedTasks(new Set());\n      setShowConvertToSubtasksModal(false);\n      setSelectedParentTaskId(null);\n    }\n  };\n  \n  const handleBulkCategoryAssign = () => {\n    setShowBulkCategoryModal(true);\n  };\n  \n  const executeBulkCategoryAssign = () => {\n    if (selectedTasks.size > 0 && selectedCategoryIdsForBulk.length > 0) {\n      bulkAssignCategories(Array.from(selectedTasks), selectedCategoryIdsForBulk, categoryAssignMode);\n      setSelectedTasks(new Set());\n      setShowBulkCategoryModal(false);\n      setSelectedCategoryIdsForBulk([]);\n      setCategoryAssignMode('add');\n    }\n  };\n  \n  // Get tomorrow's date in YYYY-MM-DD format\n  const getTomorrowDate = (): string => {\n    const tomorrow = new Date();\n    tomorrow.setDate(tomorrow.getDate() + 1);\n    return formatDate(tomorrow);\n  };\n  \n  // Get tasks due tomorrow\n  const getTasksDueTomorrow = (tasks: Task[]): Task[] => {\n    const tomorrowDate = getTomorrowDate();\n    return tasks.filter(task => \n      task.dueDate === tomorrowDate && \n      !task.completed && \n      !task.archived\n    );\n  };\n  \n  // Sort function\n  const sortTasks = (tasks: Task[]): Task[] => {\n    // If using smart sort, delegate to the smart sorting utility\n    if (showSmartSort) {\n      return smartSortTasks(tasks, smartSortMode, currentEnergy);\n    }\n    \n    // Otherwise use traditional sorting\n    const sorted = [...tasks].sort((a, b) => {\n      let comparison = 0;\n      \n      switch (sortBy) {\n        case 'dueDate':\n          // Tasks without due dates go to the end\n          if (!a.dueDate && !b.dueDate) comparison = 0;\n          else if (!a.dueDate) comparison = 1;\n          else if (!b.dueDate) comparison = -1;\n          else comparison = a.dueDate.localeCompare(b.dueDate);\n          break;\n          \n        case 'priority':\n          const priorityOrder = { high: 3, medium: 2, low: 1 };\n          comparison = (priorityOrder[b.priority || 'medium'] || 2) - (priorityOrder[a.priority || 'medium'] || 2);\n          break;\n          \n        case 'createdAt':\n          comparison = new Date(b.createdAt).getTime() - new Date(a.createdAt).getTime();\n          break;\n          \n        case 'title':\n          comparison = a.title.localeCompare(b.title);\n          break;\n          \n        case 'estimatedMinutes':\n          const aMinutes = a.estimatedMinutes || 0;\n          const bMinutes = b.estimatedMinutes || 0;\n          comparison = bMinutes - aMinutes;\n          break;\n          \n        case 'project':\n          const aProject = projects.find(p => p.id === a.projectId)?.name || '';\n          const bProject = projects.find(p => p.id === b.projectId)?.name || '';\n          comparison = aProject.localeCompare(bProject);\n          break;\n      }\n      \n      // Apply sort direction\n      return sortDirection === 'asc' ? comparison : -comparison;\n    });\n    \n    return sorted;\n  };\n  \n  // Filter tasks based on global filters (project, category)\n  const applyBaseFilter = (task: Task): boolean => {\n    if (filterProjectId && task.projectId !== filterProjectId) {\n      return false;\n    }\n    \n    if (filterCategoryId && !(task.categoryIds?.includes(filterCategoryId) || false)) {\n      return false;\n    }\n    \n    return true;\n  };\n  \n  // Get tasks for each section (unsorted)\n  const overdueTasksUnsorted = getOverdueTasks(tasks)\n    .filter(task => !task.archived)\n    .filter(applyBaseFilter);\n    \n  const todayTasksUnsorted = getTasksDueToday(tasks)\n    .filter(task => !task.archived)\n    .filter(applyBaseFilter);\n    \n  const tomorrowTasksUnsorted = getTasksDueTomorrow(tasks)\n    .filter(applyBaseFilter);\n    \n  const thisWeekTasksUnsorted = getTasksDueThisWeek(tasks)\n    .filter(task => \n      task.dueDate !== formatDate(new Date()) && \n      task.dueDate !== getTomorrowDate()\n    )\n    .filter(task => !task.archived)\n    .filter(applyBaseFilter);\n    \n  const otherTasksUnsorted = tasks.filter(task => \n    (showCompleted || !task.completed) &&\n    (showArchived || !task.archived) &&\n    (!task.dueDate || \n      (!overdueTasksUnsorted.some(t => t.id === task.id) && \n       !todayTasksUnsorted.some(t => t.id === task.id) && \n       !tomorrowTasksUnsorted.some(t => t.id === task.id) && \n       !thisWeekTasksUnsorted.some(t => t.id === task.id))\n    )\n  ).filter(applyBaseFilter);\n  \n  // Apply sorting to each section\n  const overdueTasks = sortTasks(overdueTasksUnsorted);\n  const todayTasks = sortTasks(todayTasksUnsorted);\n  const tomorrowTasks = sortTasks(tomorrowTasksUnsorted);\n  const thisWeekTasks = sortTasks(thisWeekTasksUnsorted);\n  // const otherTasks = sortTasks(otherTasksUnsorted);\n  \n  // Get currently active task list based on the selected tab\n  const getActiveTaskList = (): Task[] => {\n    switch (activeTab) {\n      case 'today':\n        return todayTasks;\n      case 'tomorrow':\n        return tomorrowTasks;\n      case 'week':\n        return thisWeekTasks;\n      case 'overdue':\n        return overdueTasks;\n      case 'all':\n        // For 'all' view, we need to sort the entire combined list\n        const allTasks = [...overdueTasksUnsorted, ...todayTasksUnsorted, ...tomorrowTasksUnsorted, ...thisWeekTasksUnsorted, ...otherTasksUnsorted];\n        return sortTasks(allTasks);\n      default:\n        // Default to all tasks view\n        const allTasksDefault = [...overdueTasksUnsorted, ...todayTasksUnsorted, ...tomorrowTasksUnsorted, ...thisWeekTasksUnsorted, ...otherTasksUnsorted];\n        return sortTasks(allTasksDefault);\n    }\n  };\n  \n  const activeTaskList = getActiveTaskList();\n  const parentTasks = activeTaskList.filter(task => !task.parentTaskId);\n  \n  return (\n    <div className=\"space-y-6\">\n      {/* Header */}\n      <div className=\"flex flex-col md:flex-row justify-between md:items-center bg-white dark:bg-gray-800 rounded-lg shadow-sm p-4\">\n        <div>\n          <h1 className=\"text-2xl font-bold text-gray-900 dark:text-gray-100\">Tasks</h1>\n          <p className=\"text-gray-600 dark:text-gray-400\">\n            {activeTaskList.length} task{activeTaskList.length !== 1 ? 's' : ''}\n            {(filterProjectId || filterCategoryId) && ' (filtered)'}\n            {selectedTasks.size > 0 && ` • ${selectedTasks.size} selected`}\n            {sortBy !== 'dueDate' && ` • Sorted by ${sortBy === 'createdAt' ? 'created date' : sortBy === 'estimatedMinutes' ? 'time estimate' : sortBy}`}\n          </p>\n        </div>\n        <div className=\"mt-4 md:mt-0 flex flex-wrap gap-2\">\n          <Button\n            variant={showBulkActions ? \"secondary\" : \"outline\"}\n            onClick={() => setShowBulkActions(!showBulkActions)}\n          >\n            {showBulkActions ? 'Hide Bulk Actions' : 'Bulk Actions'}\n          </Button>\n          <Button\n            variant=\"secondary\"\n            icon={<Archive size={16} />}\n            onClick={handleArchiveConfirmOpen}\n          >\n            Archive Completed\n          </Button>\n          <Button\n            variant={showSmartSort ? \"primary\" : \"secondary\"}\n            icon={<Brain size={16} />}\n            onClick={() => setShowSmartSort(!showSmartSort)}\n          >\n            Smart Sort\n          </Button>\n          <div className=\"relative\" ref={sortMenuRef}>\n            <Button\n              variant=\"secondary\"\n              icon={<ArrowUpDown size={16} />}\n              onClick={() => setShowSortMenu(!showSortMenu)}\n            >\n              {showSmartSort ? 'Legacy Sort' : 'Sort'}\n            </Button>\n            {showSortMenu && (\n              <div className=\"absolute right-0 mt-2 w-56 rounded-md shadow-lg bg-white dark:bg-gray-800 ring-1 ring-black dark:ring-gray-600 ring-opacity-5 z-10\">\n                <div className=\"py-1\" role=\"menu\">\n                  <button\n                    className={`w-full text-left px-4 py-2 text-sm hover:bg-gray-100 dark:hover:bg-gray-700 flex items-center justify-between ${\n                      sortBy === 'dueDate' ? 'bg-indigo-50 dark:bg-indigo-900 text-indigo-700 dark:text-indigo-300' : 'text-gray-700 dark:text-gray-300'\n                    }`}\n                    onClick={() => {\n                      if (sortBy === 'dueDate') {\n                        setSortDirection(sortDirection === 'asc' ? 'desc' : 'asc');\n                      } else {\n                        setSortBy('dueDate');\n                        setSortDirection('asc');\n                      }\n                    }}\n                  >\n                    <span className=\"flex items-center\">\n                      <Calendar size={16} className=\"mr-2\" />\n                      Due Date\n                    </span>\n                    {sortBy === 'dueDate' && (\n                      <span className=\"text-xs\">{sortDirection === 'asc' ? '↑' : '↓'}</span>\n                    )}\n                  </button>\n                  \n                  <button\n                    className={`w-full text-left px-4 py-2 text-sm hover:bg-gray-100 dark:hover:bg-gray-700 flex items-center justify-between ${\n                      sortBy === 'priority' ? 'bg-indigo-50 dark:bg-indigo-900 text-indigo-700 dark:text-indigo-300' : 'text-gray-700 dark:text-gray-300'\n                    }`}\n                    onClick={() => {\n                      if (sortBy === 'priority') {\n                        setSortDirection(sortDirection === 'asc' ? 'desc' : 'asc');\n                      } else {\n                        setSortBy('priority');\n                        setSortDirection('desc');\n                      }\n                    }}\n                  >\n                    <span className=\"flex items-center\">\n                      <Star size={16} className=\"mr-2\" />\n                      Priority\n                    </span>\n                    {sortBy === 'priority' && (\n                      <span className=\"text-xs\">{sortDirection === 'asc' ? '↑' : '↓'}</span>\n                    )}\n                  </button>\n                  \n                  <button\n                    className={`w-full text-left px-4 py-2 text-sm hover:bg-gray-100 dark:hover:bg-gray-700 flex items-center justify-between ${\n                      sortBy === 'createdAt' ? 'bg-indigo-50 dark:bg-indigo-900 text-indigo-700 dark:text-indigo-300' : 'text-gray-700 dark:text-gray-300'\n                    }`}\n                    onClick={() => {\n                      if (sortBy === 'createdAt') {\n                        setSortDirection(sortDirection === 'asc' ? 'desc' : 'asc');\n                      } else {\n                        setSortBy('createdAt');\n                        setSortDirection('desc');\n                      }\n                    }}\n                  >\n                    <span className=\"flex items-center\">\n                      <Plus size={16} className=\"mr-2\" />\n                      Created Date\n                    </span>\n                    {sortBy === 'createdAt' && (\n                      <span className=\"text-xs\">{sortDirection === 'asc' ? '↑' : '↓'}</span>\n                    )}\n                  </button>\n                  \n                  <button\n                    className={`w-full text-left px-4 py-2 text-sm hover:bg-gray-100 dark:hover:bg-gray-700 flex items-center justify-between ${\n                      sortBy === 'title' ? 'bg-indigo-50 dark:bg-indigo-900 text-indigo-700 dark:text-indigo-300' : 'text-gray-700 dark:text-gray-300'\n                    }`}\n                    onClick={() => {\n                      if (sortBy === 'title') {\n                        setSortDirection(sortDirection === 'asc' ? 'desc' : 'asc');\n                      } else {\n                        setSortBy('title');\n                        setSortDirection('asc');\n                      }\n                    }}\n                  >\n                    <span className=\"flex items-center\">\n                      <Hash size={16} className=\"mr-2\" />\n                      Title\n                    </span>\n                    {sortBy === 'title' && (\n                      <span className=\"text-xs\">{sortDirection === 'asc' ? '↑' : '↓'}</span>\n                    )}\n                  </button>\n                  \n                  <button\n                    className={`w-full text-left px-4 py-2 text-sm hover:bg-gray-100 dark:hover:bg-gray-700 flex items-center justify-between ${\n                      sortBy === 'estimatedMinutes' ? 'bg-indigo-50 dark:bg-indigo-900 text-indigo-700 dark:text-indigo-300' : 'text-gray-700 dark:text-gray-300'\n                    }`}\n                    onClick={() => {\n                      if (sortBy === 'estimatedMinutes') {\n                        setSortDirection(sortDirection === 'asc' ? 'desc' : 'asc');\n                      } else {\n                        setSortBy('estimatedMinutes');\n                        setSortDirection('desc');\n                      }\n                    }}\n                  >\n                    <span className=\"flex items-center\">\n                      <Clock size={16} className=\"mr-2\" />\n                      Time Estimate\n                    </span>\n                    {sortBy === 'estimatedMinutes' && (\n                      <span className=\"text-xs\">{sortDirection === 'asc' ? '↑' : '↓'}</span>\n                    )}\n                  </button>\n                  \n                  <button\n                    className={`w-full text-left px-4 py-2 text-sm hover:bg-gray-100 dark:hover:bg-gray-700 flex items-center justify-between ${\n                      sortBy === 'project' ? 'bg-indigo-50 dark:bg-indigo-900 text-indigo-700 dark:text-indigo-300' : 'text-gray-700 dark:text-gray-300'\n                    }`}\n                    onClick={() => {\n                      if (sortBy === 'project') {\n                        setSortDirection(sortDirection === 'asc' ? 'desc' : 'asc');\n                      } else {\n                        setSortBy('project');\n                        setSortDirection('asc');\n                      }\n                    }}\n                  >\n                    <span className=\"flex items-center\">\n                      <FolderOpen size={16} className=\"mr-2\" />\n                      Project\n                    </span>\n                    {sortBy === 'project' && (\n                      <span className=\"text-xs\">{sortDirection === 'asc' ? '↑' : '↓'}</span>\n                    )}\n                  </button>\n                </div>\n              </div>\n            )}\n          </div>\n          <Button\n            variant=\"secondary\"\n            icon={<Filter size={16} />}\n            onClick={toggleFilter}\n          >\n            Filter\n          </Button>\n          <Button\n            variant=\"primary\"\n            icon={<Plus size={16} />}\n            onClick={() => handleOpenModal()}\n          >\n            New Task\n          </Button>\n        </div>\n      </div>\n      \n      {/* Bulk Actions Bar */}\n      {showBulkActions && (\n        <Card className=\"bg-indigo-50\">\n          <div className=\"flex flex-wrap items-center justify-between gap-2\">\n            <div className=\"flex items-center gap-2\">\n              <Button\n                size=\"sm\"\n                variant=\"outline\"\n                onClick={selectAllVisibleTasks}\n              >\n                Select All\n              </Button>\n              <Button\n                size=\"sm\"\n                variant=\"outline\"\n                onClick={deselectAllTasks}\n              >\n                Deselect All\n              </Button>\n              <span className=\"text-sm text-gray-600\">\n                {selectedTasks.size} selected\n              </span>\n            </div>\n            <div className=\"flex items-center gap-2\">\n              <Button\n                size=\"sm\"\n                variant=\"primary\"\n                icon={<CheckCircle2 size={14} />}\n                onClick={handleBulkComplete}\n                disabled={selectedTasks.size === 0}\n              >\n                Complete\n              </Button>\n              <Button\n                size=\"sm\"\n                variant=\"secondary\"\n                icon={<Folder size={14} />}\n                onClick={handleBulkMove}\n                disabled={selectedTasks.size === 0}\n              >\n                Move\n              </Button>\n              <Button\n                size=\"sm\"\n                variant=\"secondary\"\n                icon={<Tag size={14} />}\n                onClick={handleBulkCategoryAssign}\n                disabled={selectedTasks.size === 0}\n              >\n                Categories\n              </Button>\n              <Button\n                size=\"sm\"\n                variant=\"secondary\"\n                icon={<Layers size={14} />}\n                onClick={handleBulkConvertToSubtasks}\n                disabled={selectedTasks.size === 0}\n              >\n                Make Subtasks\n              </Button>\n              <Button\n                size=\"sm\"\n                variant=\"secondary\"\n                icon={<FileArchive size={14} />}\n                onClick={handleBulkArchive}\n                disabled={selectedTasks.size === 0}\n              >\n                Archive\n              </Button>\n              <Button\n                size=\"sm\"\n                variant=\"danger\"\n                icon={<Trash2 size={14} />}\n                onClick={handleBulkDelete}\n                disabled={selectedTasks.size === 0}\n              >\n                Delete\n              </Button>\n            </div>\n          </div>\n        </Card>\n      )}\n      \n      {/* Quick Task Input */}\n      <div className=\"mb-6\">\n        <QuickCapture \n          placeholder=\"Add a task quickly... (try !today, !tomorrow, !high)\"\n          defaultProjectId={filterProjectId}\n          onTaskAdded={() => {\n            if (activeTab === 'today') {\n              // Stay on today tab\n            } else if (activeTab === 'all') {\n              // Stay on all tab\n            } else {\n              setActiveTab('all');\n            }\n          }}\n        />\n      </div>\n      \n      {/* Tab navigation */}\n      <div className=\"overflow-x-auto pb-1 md:pb-0 hide-scrollbar\">\n        <div className=\"flex min-w-max border-b border-gray-200\">\n          <button\n            className={`flex-shrink-0 px-4 py-2 font-medium text-sm rounded-t-md border-b-2 transition-colors ${\n              activeTab === 'today' \n                ? 'border-indigo-500 text-indigo-600 bg-indigo-50' \n                : 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300'\n            }`}\n            onClick={() => setActiveTab('today')}\n          >\n            <div className=\"flex items-center space-x-2\">\n              <Calendar size={16} />\n              <span className=\"whitespace-nowrap\">Today{todayTasks.length > 0 && ` (${todayTasks.length})`}</span>\n            </div>\n          </button>\n          \n          <button\n            className={`flex-shrink-0 px-4 py-2 font-medium text-sm rounded-t-md border-b-2 transition-colors ${\n              activeTab === 'tomorrow' \n                ? 'border-indigo-500 text-indigo-600 bg-indigo-50' \n                : 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300'\n            }`}\n            onClick={() => setActiveTab('tomorrow')}\n          >\n            <div className=\"flex items-center space-x-2\">\n              <CalendarDays size={16} />\n              <span className=\"whitespace-nowrap\">Tomorrow{tomorrowTasks.length > 0 && ` (${tomorrowTasks.length})`}</span>\n            </div>\n          </button>\n          \n          <button\n            className={`flex-shrink-0 px-4 py-2 font-medium text-sm rounded-t-md border-b-2 transition-colors ${\n              activeTab === 'week' \n                ? 'border-indigo-500 text-indigo-600 bg-indigo-50' \n                : 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300'\n            }`}\n            onClick={() => setActiveTab('week')}\n          >\n            <div className=\"flex items-center space-x-2\">\n              <CalendarDays size={16} />\n              <span className=\"whitespace-nowrap\">This Week{thisWeekTasks.length > 0 && ` (${thisWeekTasks.length})`}</span>\n            </div>\n          </button>\n          \n          <button\n            className={`flex-shrink-0 px-4 py-2 font-medium text-sm rounded-t-md border-b-2 transition-colors ${\n              activeTab === 'overdue' \n                ? 'border-red-500 text-red-600 bg-red-50' \n                : 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300'\n            }`}\n            onClick={() => setActiveTab('overdue')}\n          >\n            <div className=\"flex items-center space-x-2\">\n              <AlertTriangle size={16} className={overdueTasks.length > 0 ? 'text-red-500' : ''} />\n              <span className=\"whitespace-nowrap\">Overdue{overdueTasks.length > 0 && ` (${overdueTasks.length})`}</span>\n            </div>\n          </button>\n          \n          <button\n            className={`flex-shrink-0 px-4 py-2 font-medium text-sm rounded-t-md border-b-2 transition-colors ${\n              activeTab === 'all' \n                ? 'border-indigo-500 text-indigo-600 bg-indigo-50' \n                : 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300'\n            }`}\n            onClick={() => setActiveTab('all')}\n          >\n            <div className=\"flex items-center space-x-2\">\n              <Layers size={16} />\n              <span className=\"whitespace-nowrap\">All Tasks</span>\n            </div>\n          </button>\n          \n          <button\n            className={`flex-shrink-0 px-4 py-2 font-medium text-sm rounded-t-md border-b-2 transition-colors ${\n              activeTab === 'deleted' \n                ? 'border-gray-500 text-gray-600 bg-gray-50' \n                : 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300'\n            }`}\n            onClick={() => setActiveTab('deleted')}\n          >\n            <div className=\"flex items-center space-x-2\">\n              <Trash2 size={16} />\n              <span className=\"whitespace-nowrap\">Deleted</span>\n            </div>\n          </button>\n        </div>\n      </div>\n      \n      {/* Add CSS for hiding scrollbar but allowing scroll */}\n      <style>{`\n        .hide-scrollbar {\n          -ms-overflow-style: none;  /* IE and Edge */\n          scrollbar-width: none;  /* Firefox */\n        }\n        .hide-scrollbar::-webkit-scrollbar {\n          display: none;  /* Chrome, Safari, Opera */\n        }\n      `}</style>\n      \n      {/* Undo notification */}\n      {showUndoNotification && (\n        <div className=\"fixed bottom-4 right-4 bg-gray-800 text-white px-4 py-2 rounded-lg shadow-lg flex items-center space-x-3 z-50\">\n          <span>Task deleted</span>\n          <Button\n            variant=\"secondary\"\n            size=\"sm\"\n            icon={<Undo2 size={14} />}\n            onClick={handleUndo}\n          >\n            Undo\n          </Button>\n        </div>\n      )}\n      \n      {/* Filter panel - same as before */}\n      {isFilterOpen && (\n        <Card className=\"bg-gray-50\">\n          <div className=\"space-y-4\">\n            <div className=\"flex justify-between items-center\">\n              <h3 className=\"text-lg font-medium text-gray-900\">Filters</h3>\n              <button\n                className=\"text-gray-400 hover:text-gray-500\"\n                onClick={toggleFilter}\n              >\n                <X size={20} />\n              </button>\n            </div>\n            \n            <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                  Task Status\n                </label>\n                <div className=\"flex flex-col space-y-2\">\n                  <div className=\"flex items-center\">\n                    <input\n                      type=\"checkbox\"\n                      id=\"showCompleted\"\n                      checked={showCompleted}\n                      onChange={() => setShowCompleted(!showCompleted)}\n                      className=\"h-4 w-4 text-indigo-600 border-gray-300 rounded\"\n                    />\n                    <label htmlFor=\"showCompleted\" className=\"ml-2 text-sm text-gray-700\">\n                      Show completed tasks\n                    </label>\n                  </div>\n                  <div className=\"flex items-center\">\n                    <input\n                      type=\"checkbox\"\n                      id=\"showArchived\"\n                      checked={showArchived}\n                      onChange={() => setShowArchived(!showArchived)}\n                      className=\"h-4 w-4 text-indigo-600 border-gray-300 rounded\"\n                    />\n                    <label htmlFor=\"showArchived\" className=\"ml-2 text-sm text-gray-700\">\n                      Show archived tasks\n                    </label>\n                  </div>\n                </div>\n              </div>\n              \n              <div>\n                <label htmlFor=\"projectFilter\" className=\"block text-sm font-medium text-gray-700 mb-1\">\n                  Project\n                </label>\n                <select\n                  id=\"projectFilter\"\n                  value={filterProjectId || ''}\n                  onChange={(e) => setFilterProjectId(e.target.value || null)}\n                  className=\"block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm\"\n                >\n                  <option value=\"\">All Projects</option>\n                  {projects.map(project => (\n                    <option key={project.id} value={project.id}>\n                      {project.name}\n                    </option>\n                  ))}\n                </select>\n              </div>\n              \n              <div>\n                <label htmlFor=\"categoryFilter\" className=\"block text-sm font-medium text-gray-700 mb-1\">\n                  Category\n                </label>\n                <select\n                  id=\"categoryFilter\"\n                  value={filterCategoryId || ''}\n                  onChange={(e) => setFilterCategoryId(e.target.value || null)}\n                  className=\"block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm\"\n                >\n                  <option value=\"\">All Categories</option>\n                  {categories.map(category => (\n                    <option key={category.id} value={category.id}>\n                      {category.name}\n                    </option>\n                  ))}\n                </select>\n              </div>\n            </div>\n            \n            <div className=\"flex justify-end\">\n              <Button\n                variant=\"secondary\"\n                size=\"sm\"\n                onClick={clearFilters}\n              >\n                Clear Filters\n              </Button>\n            </div>\n          </div>\n        </Card>\n      )}\n      \n      {/* Smart Sort Controls */}\n      {showSmartSort && (\n        <Card className=\"bg-gradient-to-r from-purple-50 to-indigo-50 dark:from-purple-900/20 dark:to-indigo-900/20 border-purple-200 dark:border-purple-800\">\n          <div className=\"space-y-4\">\n            <div className=\"flex justify-between items-center\">\n              <h3 className=\"text-lg font-medium text-gray-900 dark:text-gray-100 flex items-center\">\n                <Brain size={20} className=\"mr-2 text-purple-600 dark:text-purple-400\" />\n                Smart Task Prioritization\n              </h3>\n              <button\n                className=\"text-gray-400 hover:text-gray-500\"\n                onClick={() => setShowSmartSort(false)}\n              >\n                <X size={20} />\n              </button>\n            </div>\n            \n            {/* Current Energy Level */}\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\n                <Battery size={16} className=\"inline mr-1\" />\n                Your Current Energy Level\n              </label>\n              <div className=\"flex gap-2\">\n                {(['low', 'medium', 'high'] as const).map(level => (\n                  <button\n                    key={level}\n                    onClick={() => setCurrentEnergy(level)}\n                    className={`px-4 py-2 rounded-lg font-medium transition-all ${\n                      currentEnergy === level\n                        ? 'bg-purple-600 text-white shadow-lg scale-105'\n                        : 'bg-white dark:bg-gray-800 text-gray-700 dark:text-gray-300 hover:bg-purple-50 dark:hover:bg-purple-900/20'\n                    }`}\n                  >\n                    {level === 'low' && '🔋 Low'}\n                    {level === 'medium' && '🔋🔋 Medium'}\n                    {level === 'high' && '🔋🔋🔋 High'}\n                  </button>\n                ))}\n              </div>\n            </div>\n            \n            {/* Sorting Mode */}\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\n                <Zap size={16} className=\"inline mr-1\" />\n                Prioritization Strategy\n              </label>\n              <div className=\"grid grid-cols-2 md:grid-cols-3 gap-2\">\n                {[\n                  { mode: 'smart' as const, label: '🧠 Smart Sort', desc: 'AI-optimized task ordering' },\n                  { mode: 'energymatch' as const, label: '🔋 Energy Match', desc: 'Only matching tasks' },\n                  { mode: 'quickwins' as const, label: '⚡ Quick Wins', desc: 'Build momentum' },\n                  { mode: 'eatthefrog' as const, label: '🐸 Eat the Frog', desc: 'Hard tasks first' },\n                  { mode: 'deadline' as const, label: '⏰ Deadline Focus', desc: 'Due date priority' },\n                  { mode: 'priority' as const, label: '⭐ Priority', desc: 'Traditional priority' },\n                ].map(({ mode, label, desc }) => (\n                  <button\n                    key={mode}\n                    onClick={() => setSmartSortMode(mode)}\n                    className={`p-3 rounded-lg text-left transition-all ${\n                      smartSortMode === mode\n                        ? 'bg-purple-600 text-white shadow-lg'\n                        : 'bg-white dark:bg-gray-800 text-gray-700 dark:text-gray-300 hover:bg-purple-50 dark:hover:bg-purple-900/20 border border-gray-200 dark:border-gray-700'\n                    }`}\n                  >\n                    <div className=\"font-medium text-sm\">{label}</div>\n                    <div className={`text-xs mt-1 ${smartSortMode === mode ? 'text-purple-100' : 'text-gray-500 dark:text-gray-400'}`}>\n                      {desc}\n                    </div>\n                  </button>\n                ))}\n              </div>\n            </div>\n            \n            {/* Filter Chips */}\n            {(() => {\n              const filteredCounts = getFilteredCounts(tasks, currentEnergy);\n              const activeTasks = tasks.filter(t => !t.completed && !t.archived);\n              return (\n                <div className=\"flex flex-wrap gap-2\">\n                  <div className=\"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2 w-full\">\n                    Quick Filters ({activeTasks.length} active tasks):\n                  </div>\n                  <button\n                    onClick={() => setSmartSortMode('quickwins')}\n                    className={`px-3 py-1 rounded-full text-sm transition-all ${\n                      smartSortMode === 'quickwins'\n                        ? 'bg-green-500 text-white'\n                        : 'bg-green-100 dark:bg-green-900/20 text-green-700 dark:text-green-300 hover:bg-green-200 dark:hover:bg-green-900/30'\n                    }`}\n                  >\n                    ⚡ Quick Wins ({filteredCounts.quickWins})\n                  </button>\n                  \n                  <button\n                    onClick={() => setSmartSortMode('deadline')}\n                    className={`px-3 py-1 rounded-full text-sm transition-all ${\n                      smartSortMode === 'deadline'\n                        ? 'bg-red-500 text-white'\n                        : 'bg-red-100 dark:bg-red-900/20 text-red-700 dark:text-red-300 hover:bg-red-200 dark:hover:bg-red-900/30'\n                    }`}\n                  >\n                    🔥 Due Today ({filteredCounts.dueToday})\n                  </button>\n                  \n                  <button\n                    onClick={() => setSmartSortMode('eatthefrog')}\n                    className={`px-3 py-1 rounded-full text-sm transition-all ${\n                      smartSortMode === 'eatthefrog'\n                        ? 'bg-orange-500 text-white'\n                        : 'bg-orange-100 dark:bg-orange-900/20 text-orange-700 dark:text-orange-300 hover:bg-orange-200 dark:hover:bg-orange-900/30'\n                    }`}\n                  >\n                    💪 High Energy ({filteredCounts.highEnergy})\n                  </button>\n                  \n                  {filteredCounts.energyMatch > 0 && (\n                    <button\n                      onClick={() => setSmartSortMode('energymatch')}\n                      className={`px-3 py-1 rounded-full text-sm transition-all ${\n                        smartSortMode === 'energymatch'\n                          ? 'bg-blue-500 text-white'\n                          : 'bg-blue-100 dark:bg-blue-900/20 text-blue-700 dark:text-blue-300 hover:bg-blue-200 dark:hover:bg-blue-900/30'\n                      }`}\n                    >\n                      🔋 Energy Match ({filteredCounts.energyMatch})\n                    </button>\n                  )}\n                </div>\n              );\n            })()}\n            \n            {/* Smart Sort Info */}\n            <div className=\"bg-white dark:bg-gray-800 rounded-lg p-3 text-sm text-gray-600 dark:text-gray-400\">\n              <p className=\"font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                Current Strategy: {getSortModeInfo(smartSortMode).name}\n              </p>\n              <p>{getSortModeInfo(smartSortMode).description}</p>\n            </div>\n          </div>\n        </Card>\n      )}\n      \n      {/* Task list */}\n      <div className=\"bg-white dark:bg-gray-800 rounded-lg shadow-sm p-4\">\n        <div className=\"space-y-4\">\n          {parentTasks.length > 0 ? (\n            <div>\n              {activeTab === 'all' ? (\n                <div className=\"space-y-2\">\n                  {parentTasks.map(task => (\n                    <BulkTaskCard\n                      key={task.id}\n                      task={task}\n                      isSelected={selectedTasks.has(task.id)}\n                      onSelectChange={(selected) => {\n                        if (selected) {\n                          toggleTaskSelection(task.id);\n                        } else {\n                          const newSelection = new Set(selectedTasks);\n                          newSelection.delete(task.id);\n                          setSelectedTasks(newSelection);\n                        }\n                      }}\n                      onEdit={handleOpenModal}\n                      onDelete={handleDeleteTask}\n                      onBreakdown={handleBreakdown}\n                    />\n                  ))}\n                </div>\n              ) : (\n                <div className=\"space-y-2\">\n                  {parentTasks.map(task => (\n                    <BulkTaskCard\n                      key={task.id}\n                      task={task}\n                      isSelected={selectedTasks.has(task.id)}\n                      onSelectChange={(selected) => {\n                        if (selected) {\n                          toggleTaskSelection(task.id);\n                        } else {\n                          const newSelection = new Set(selectedTasks);\n                          newSelection.delete(task.id);\n                          setSelectedTasks(newSelection);\n                        }\n                      }}\n                      onEdit={handleOpenModal}\n                      onDelete={handleDeleteTask}\n                      onBreakdown={handleBreakdown}\n                    />\n                  ))}\n                </div>\n              )}\n            </div>\n          ) : (\n            <Empty\n              title=\"No tasks found\"\n              description={\n                filterProjectId || filterCategoryId\n                  ? \"Try adjusting your filters or create a new task\"\n                  : activeTab === 'today'\n                    ? \"No tasks due today. Add a task or check another tab.\"\n                    : activeTab === 'tomorrow'\n                      ? \"No tasks due tomorrow. Add a task or check another tab.\"\n                      : activeTab === 'week'\n                        ? \"No tasks due this week. Add a task or check another tab.\"\n                        : activeTab === 'overdue'\n                          ? \"No overdue tasks. You're all caught up!\"\n                          : \"Get started by creating your first task\"\n              }\n              action={\n                <Button\n                  variant=\"primary\"\n                  size=\"sm\"\n                  icon={<Plus size={16} />}\n                  onClick={() => handleOpenModal()}\n                >\n                  New Task\n                </Button>\n              }\n            />\n          )}\n        </div>\n      </div>\n      \n      {/* Task Modal */}\n      <Modal\n        isOpen={isModalOpen}\n        onClose={handleCloseModal}\n        title={editingTask ? 'Edit Task' : 'Create New Task'}\n        size=\"3xl\"\n      >\n        <TaskFormWithDependencies\n          task={editingTask || undefined}\n          onClose={handleCloseModal}\n          isEdit={!!editingTask}\n        />\n      </Modal>\n      \n      {/* Archive Confirmation Modal */}\n      <Modal\n        isOpen={showArchiveConfirm}\n        onClose={handleArchiveConfirmClose}\n        title=\"Archive Completed Tasks\"\n        size=\"sm\"\n      >\n        <div className=\"space-y-4\">\n          <p className=\"text-gray-600\">\n            This will archive all completed tasks. Archived tasks will be hidden by default but can still be viewed using the filter.\n          </p>\n          <div className=\"flex justify-end space-x-3 pt-4\">\n            <Button\n              variant=\"secondary\"\n              onClick={handleArchiveConfirmClose}\n            >\n              Cancel\n            </Button>\n            <Button\n              variant=\"primary\"\n              icon={<Archive size={16} />}\n              onClick={handleArchiveCompleted}\n            >\n              Archive Tasks\n            </Button>\n          </div>\n        </div>\n      </Modal>\n      \n      {/* Bulk Move Modal */}\n      <Modal\n        isOpen={showBulkMoveModal}\n        onClose={() => setShowBulkMoveModal(false)}\n        title=\"Move Selected Tasks\"\n        size=\"sm\"\n      >\n        <div className=\"space-y-4\">\n          <p className=\"text-gray-600\">\n            Move {selectedTasks.size} selected task{selectedTasks.size !== 1 ? 's' : ''} to:\n          </p>\n          <select\n            value={selectedProjectForMove || ''}\n            onChange={(e) => setSelectedProjectForMove(e.target.value || null)}\n            className=\"block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm\"\n          >\n            <option value=\"\">No Project</option>\n            {projects.map(project => (\n              <option key={project.id} value={project.id}>\n                {project.name}\n              </option>\n            ))}\n          </select>\n          <div className=\"flex justify-end space-x-3 pt-4\">\n            <Button\n              variant=\"secondary\"\n              onClick={() => setShowBulkMoveModal(false)}\n            >\n              Cancel\n            </Button>\n            <Button\n              variant=\"primary\"\n              icon={<Folder size={16} />}\n              onClick={executeBulkMove}\n            >\n              Move Tasks\n            </Button>\n          </div>\n        </div>\n      </Modal>\n      \n      {/* AI Breakdown Modal */}\n      {breakdownTask && (\n        <AITaskBreakdown\n          task={breakdownTask}\n          onAccept={handleBreakdownAccept}\n          onClose={handleBreakdownClose}\n        />\n      )}\n      \n      {/* Convert to Subtasks Modal */}\n      <Modal\n        isOpen={showConvertToSubtasksModal}\n        onClose={() => {\n          setShowConvertToSubtasksModal(false);\n          setSelectedParentTaskId(null);\n        }}\n        title=\"Convert to Subtasks\"\n        size=\"md\"\n      >\n        <div className=\"space-y-4\">\n          <p className=\"text-gray-600\">\n            Convert {selectedTasks.size} selected task{selectedTasks.size !== 1 ? 's' : ''} into subtasks of:\n          </p>\n          \n          <div className=\"max-h-96 overflow-y-auto space-y-2 border rounded-md p-3\">\n            {tasks\n              .filter(task => \n                !task.completed && \n                !task.archived && \n                !selectedTasks.has(task.id) // Can't make a task a subtask of itself\n              )\n              .map(task => (\n                <label\n                  key={task.id}\n                  className={`flex items-start p-3 rounded-lg cursor-pointer transition-colors ${\n                    selectedParentTaskId === task.id \n                      ? 'bg-indigo-50 border-2 border-indigo-500' \n                      : 'bg-gray-50 hover:bg-gray-100 border-2 border-transparent'\n                  }`}\n                >\n                  <input\n                    type=\"radio\"\n                    name=\"parentTask\"\n                    value={task.id}\n                    checked={selectedParentTaskId === task.id}\n                    onChange={() => setSelectedParentTaskId(task.id)}\n                    className=\"mt-1 h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300\"\n                  />\n                  <div className=\"ml-3 flex-1\">\n                    <div className=\"font-medium text-gray-900\">{task.title}</div>\n                    {task.description && (\n                      <div className=\"text-sm text-gray-500 mt-1\">{task.description}</div>\n                    )}\n                    {task.projectId && (\n                      <div className=\"text-xs text-gray-500 mt-1\">\n                        Project: {projects.find(p => p.id === task.projectId)?.name}\n                      </div>\n                    )}\n                  </div>\n                </label>\n              ))\n            }\n          </div>\n          \n          <div className=\"flex justify-end space-x-3 pt-4\">\n            <Button\n              variant=\"secondary\"\n              onClick={() => {\n                setShowConvertToSubtasksModal(false);\n                setSelectedParentTaskId(null);\n              }}\n            >\n              Cancel\n            </Button>\n            <Button\n              variant=\"primary\"\n              icon={<Layers size={16} />}\n              onClick={executeBulkConvertToSubtasks}\n              disabled={!selectedParentTaskId}\n            >\n              Convert to Subtasks\n            </Button>\n          </div>\n        </div>\n      </Modal>\n      \n      {/* Bulk Category Assignment Modal */}\n      <Modal\n        isOpen={showBulkCategoryModal}\n        onClose={() => {\n          setShowBulkCategoryModal(false);\n          setSelectedCategoryIdsForBulk([]);\n          setCategoryAssignMode('add');\n        }}\n        title=\"Assign Categories\"\n        size=\"md\"\n      >\n        <div className=\"space-y-4\">\n          <p className=\"text-gray-600\">\n            Assign categories to {selectedTasks.size} selected task{selectedTasks.size !== 1 ? 's' : ''}:\n          </p>\n          \n          <div className=\"space-y-2\">\n            <label className=\"block text-sm font-medium text-gray-700\">\n              Assignment Mode\n            </label>\n            <div className=\"space-y-2\">\n              <label className=\"flex items-center\">\n                <input\n                  type=\"radio\"\n                  name=\"assignMode\"\n                  value=\"add\"\n                  checked={categoryAssignMode === 'add'}\n                  onChange={() => setCategoryAssignMode('add')}\n                  className=\"h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300\"\n                />\n                <span className=\"ml-2 text-sm text-gray-700\">\n                  Add to existing categories\n                </span>\n              </label>\n              <label className=\"flex items-center\">\n                <input\n                  type=\"radio\"\n                  name=\"assignMode\"\n                  value=\"replace\"\n                  checked={categoryAssignMode === 'replace'}\n                  onChange={() => setCategoryAssignMode('replace')}\n                  className=\"h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300\"\n                />\n                <span className=\"ml-2 text-sm text-gray-700\">\n                  Replace all existing categories\n                </span>\n              </label>\n            </div>\n          </div>\n          \n          <div className=\"space-y-2\">\n            <label className=\"block text-sm font-medium text-gray-700\">\n              Select Categories\n            </label>\n            <div className=\"max-h-64 overflow-y-auto space-y-2 border rounded-md p-3\">\n              {categories.map(category => (\n                <label\n                  key={category.id}\n                  className=\"flex items-center p-2 rounded hover:bg-gray-50 cursor-pointer\"\n                >\n                  <input\n                    type=\"checkbox\"\n                    value={category.id}\n                    checked={selectedCategoryIdsForBulk.includes(category.id)}\n                    onChange={(e) => {\n                      if (e.target.checked) {\n                        setSelectedCategoryIdsForBulk([...selectedCategoryIdsForBulk, category.id]);\n                      } else {\n                        setSelectedCategoryIdsForBulk(\n                          selectedCategoryIdsForBulk.filter(id => id !== category.id)\n                        );\n                      }\n                    }}\n                    className=\"h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded\"\n                  />\n                  <div className=\"ml-3 flex items-center\">\n                    <div\n                      className=\"h-4 w-4 rounded mr-2\"\n                      style={{ backgroundColor: category.color }}\n                    />\n                    <span className=\"text-sm text-gray-900\">{category.name}</span>\n                  </div>\n                </label>\n              ))}\n            </div>\n          </div>\n          \n          <div className=\"flex justify-end space-x-3 pt-4\">\n            <Button\n              variant=\"secondary\"\n              onClick={() => {\n                setShowBulkCategoryModal(false);\n                setSelectedCategoryIdsForBulk([]);\n                setCategoryAssignMode('add');\n              }}\n            >\n              Cancel\n            </Button>\n            <Button\n              variant=\"primary\"\n              icon={<Tag size={16} />}\n              onClick={executeBulkCategoryAssign}\n              disabled={selectedCategoryIdsForBulk.length === 0}\n            >\n              Assign Categories\n            </Button>\n          </div>\n        </div>\n      </Modal>\n    </div>\n  );\n};\n\nexport default TasksPageWithBulkOps;"],"names":["CalendarDays","createLucideIcon","Undo2","BulkTaskCard","task","isSelected","onSelectChange","onEdit","onDelete","onBreakdown","updateTask","useAppContext","jsxs","jsx","e","TaskDisplay","TasksPageWithBulkOps","location","useLocation","tasks","projects","categories","deleteTask","undoDelete","hasRecentlyDeleted","archiveCompletedTasks","bulkDeleteTasks","bulkCompleteTasks","bulkMoveTasks","bulkArchiveTasks","bulkAddTasks","bulkConvertToSubtasks","bulkAssignCategories","searchParams","tabParam","categoryIdParam","initialTab","isModalOpen","setIsModalOpen","useState","editingTask","setEditingTask","showUndoNotification","setShowUndoNotification","showArchiveConfirm","setShowArchiveConfirm","showBulkActions","setShowBulkActions","selectedTasks","setSelectedTasks","showBulkMoveModal","setShowBulkMoveModal","selectedProjectForMove","setSelectedProjectForMove","breakdownTask","setBreakdownTask","showConvertToSubtasksModal","setShowConvertToSubtasksModal","selectedParentTaskId","setSelectedParentTaskId","setDeletedTasks","showBulkCategoryModal","setShowBulkCategoryModal","selectedCategoryIdsForBulk","setSelectedCategoryIdsForBulk","categoryAssignMode","setCategoryAssignMode","showCompleted","setShowCompleted","showArchived","setShowArchived","filterProjectId","setFilterProjectId","filterCategoryId","setFilterCategoryId","isFilterOpen","setIsFilterOpen","activeTab","setActiveTab","sortBy","setSortBy","sortDirection","setSortDirection","showSortMenu","setShowSortMenu","sortMenuRef","useRef","smartSortMode","setSmartSortMode","currentEnergy","setCurrentEnergy","showSmartSort","setShowSmartSort","useEffect","timer","loadDeletedTasks","handleClickOutside","event","deleted","getDeletedTasks","a","b","handleOpenModal","handleCloseModal","handleDeleteTask","taskId","handleUndo","toggleFilter","clearFilters","handleArchiveConfirmOpen","handleArchiveConfirmClose","handleArchiveCompleted","handleBreakdown","handleBreakdownAccept","subtasks","preparedSubtasks","subtask","handleBreakdownClose","toggleTaskSelection","newSelection","selectAllVisibleTasks","visibleTaskIds","getActiveTaskList","deselectAllTasks","handleBulkDelete","handleBulkComplete","handleBulkMove","executeBulkMove","handleBulkArchive","handleBulkConvertToSubtasks","executeBulkConvertToSubtasks","handleBulkCategoryAssign","executeBulkCategoryAssign","getTomorrowDate","tomorrow","formatDate","getTasksDueTomorrow","tomorrowDate","sortTasks","smartSortTasks","comparison","priorityOrder","aMinutes","aProject","_a","p","bProject","_b","applyBaseFilter","overdueTasksUnsorted","getOverdueTasks","todayTasksUnsorted","getTasksDueToday","tomorrowTasksUnsorted","thisWeekTasksUnsorted","getTasksDueThisWeek","otherTasksUnsorted","overdueTasks","todayTasks","tomorrowTasks","thisWeekTasks","allTasks","allTasksDefault","activeTaskList","parentTasks","Button","Archive","Brain","ArrowUpDown","Calendar","Star","Plus","Hash","Clock","FolderOpen","Filter","Card","CheckCircle2","Folder","Tag","Layers","FileArchive","Trash2","QuickCapture","AlertTriangle","X","project","category","Battery","level","Zap","mode","label","desc","filteredCounts","getFilteredCounts","activeTasks","t","getSortModeInfo","selected","Empty","Modal","TaskFormWithDependencies","AITaskBreakdown","id"],"mappings":"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","x_google_ignoreList":[0,1]}