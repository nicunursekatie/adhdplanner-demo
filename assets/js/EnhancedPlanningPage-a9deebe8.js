import{c as Z,a as V,r as o,j as e,P as L,G as me,C as te,I as xe,o as ge,T as he,J as ue,t as pe,h as be,K as je,N as fe,O as ye,R as ve,U as ie,V as O,W as G,B as $,Y as U,k as F,_ as Ne,$ as q,a0 as oe,a1 as se,a2 as ke,a3 as we,q as ne,f as Ce,m as Se,M as De,a4 as Te}from"./main-3602d384.js";/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ze=Z("ArrowDownCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 8v8",key:"napkw2"}],["path",{d:"m8 12 4 4 4-4",key:"k98ssh"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pe=Z("Backpack",[["path",{d:"M4 10a4 4 0 0 1 4-4h8a4 4 0 0 1 4 4v10a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2Z",key:"wvr1b5"}],["path",{d:"M9 6V4a2 2 0 0 1 2-2h2a2 2 0 0 1 2 2v2",key:"donm21"}],["path",{d:"M8 21v-5a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v5",key:"xk3gvk"}],["path",{d:"M8 10h8",key:"c7uz4u"}],["path",{d:"M8 18h8",key:"1no2b1"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Me=Z("Cpu",[["rect",{x:"4",y:"4",width:"16",height:"16",rx:"2",key:"1vbyd7"}],["rect",{x:"9",y:"9",width:"6",height:"6",key:"o3kz5p"}],["path",{d:"M15 2v2",key:"13l42r"}],["path",{d:"M15 20v2",key:"15mkzm"}],["path",{d:"M2 15h2",key:"1gxd5l"}],["path",{d:"M2 9h2",key:"1bbxkp"}],["path",{d:"M20 15h2",key:"19e6y8"}],["path",{d:"M20 9h2",key:"19tzq7"}],["path",{d:"M9 2v2",key:"165o2o"}],["path",{d:"M9 20v2",key:"i2bqo8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $e=Z("Flag",[["path",{d:"M4 15s1-1 4-1 5 2 8 2 4-1 4-1V3s-1 1-4 1-5-2-8-2-4 1-4 1z",key:"i9b6wo"}],["line",{x1:"4",x2:"4",y1:"22",y2:"15",key:"1cm3nv"}]]),de=({onTaskAdded:j,defaultProjectId:h=null,defaultDueDate:v=null})=>{var B;const{addTask:N,projects:d,categories:i}=V(),[u,D]=o.useState(!1),[T,M]=o.useState(""),[f,y]=o.useState(v),[z,k]=o.useState(h),[P,w]=o.useState([]),[C,p]=o.useState("medium"),[b,a]=o.useState("week"),[g,x]=o.useState("neutral"),[s,r]=o.useState("medium"),[l,t]=o.useState(!1),[S,R]=o.useState(!1),E=o.useRef(null);o.useEffect(()=>{u&&E.current&&E.current.focus()},[u]);const _=c=>{if(c&&c.preventDefault(),!T.trim())return;const m={title:T.trim(),dueDate:f,projectId:z,categoryIds:P,priority:C,urgency:b,emotionalWeight:g,energyRequired:s,completed:!1,archived:!1};N(m),M(""),v||y(null),h||k(null),w([]),p("medium"),a("week"),x("neutral"),r("medium"),j&&j(),E.current&&E.current.focus()},Q=c=>{w(m=>m.includes(c)?m.filter(Y=>Y!==c):[...m,c])},J=c=>{let m=c;const{cleanedText:Y,date:ae}=je(m);ae&&(y(fe(ae)),m=Y),m.includes("!high")?(p("high"),m=m.replace("!high","")):m.includes("!medium")?(p("medium"),m=m.replace("!medium","")):m.includes("!low")&&(p("low"),m=m.replace("!low",""));const X=m.match(/#([a-zA-Z0-9-_]+)/);if(X&&X[1]){const W=X[1].toLowerCase(),H=d.find(ee=>ee.name.toLowerCase().replace(/\s+/g,"-")===W);H&&(k(H.id),m=m.replace(/#([a-zA-Z0-9-_]+)/,""))}const re=m.match(/@([a-zA-Z0-9-_]+)/g);if(re){const W=[];re.forEach(H=>{const ee=H.substring(1).toLowerCase(),le=i.find(ce=>ce.name.toLowerCase().replace(/\s+/g,"-")===ee);le&&(W.push(le.id),m=m.replace(H,""))}),W.length>0&&w(W)}m=m.replace(/\s+/g," ").trim(),M(m)},n=()=>{switch(C){case"high":return"text-red-500";case"medium":return"text-orange-500";case"low":return"text-green-500";default:return"text-gray-400"}},I=()=>{switch(b){case"today":return"text-red-600 bg-red-50 px-2 py-1 rounded-full";case"week":return"text-orange-600 bg-orange-50 px-2 py-1 rounded-full";case"month":return"text-yellow-600 bg-yellow-50 px-2 py-1 rounded-full";case"someday":return"text-blue-600 bg-blue-50 px-2 py-1 rounded-full";default:return"text-gray-400"}},A=()=>{switch(s){case"low":return"text-green-600 bg-green-50 px-2 py-1 rounded-full";case"medium":return"text-green-600 bg-green-50 px-2 py-1 rounded-full";case"high":return"text-green-600 bg-green-50 px-2 py-1 rounded-full";default:return"text-gray-400"}},K=()=>{switch(g){case"easy":return"text-green-600 bg-green-50 px-2 py-1 rounded-full";case"neutral":return"text-yellow-600 bg-yellow-50 px-2 py-1 rounded-full";case"stressful":return"text-orange-600 bg-orange-50 px-2 py-1 rounded-full";case"dreading":return"text-red-600 bg-red-50 px-2 py-1 rounded-full";default:return"text-gray-400"}};return e.jsx("div",{className:`bg-white rounded-lg shadow p-3 transition-all ${u?"border-indigo-500 border":""}`,children:e.jsxs("form",{onSubmit:_,children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("button",{type:"button",className:"mr-3 flex-shrink-0 focus:outline-none text-gray-400 hover:text-indigo-500",onClick:()=>D(!u),children:e.jsx(L,{size:24})}),e.jsx("input",{ref:E,type:"text",placeholder:u?"What do you need to do? (Try !today, #project, @category)":"Quick add task...",className:"flex-grow text-gray-900 placeholder-gray-500 border-0 focus:ring-0 p-0 text-base",value:T,onChange:c=>J(c.target.value),onClick:()=>D(!0)}),T&&e.jsx("button",{type:"submit",className:"ml-2 p-2 rounded-full bg-indigo-50 text-indigo-600 hover:bg-indigo-100",children:e.jsx(L,{size:18})})]}),u&&e.jsx("div",{className:"mt-3 pt-3 border-t border-gray-100",children:e.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[e.jsxs("button",{type:"button",className:`flex items-center text-sm ${f?"text-indigo-600 bg-indigo-50 px-2 py-1 rounded-full":"text-gray-500"}`,onClick:()=>{y(f?null:me())},children:[e.jsx(te,{size:16,className:"mr-1"}),f?Ie(f):"Due date"]}),e.jsxs("button",{type:"button",className:`flex items-center text-sm ${n()}`,onClick:()=>{p(C==="medium"?"high":C==="high"?"low":"medium")},children:[e.jsx(xe,{size:16,className:"mr-1"}),C==="medium"?"Medium":C==="high"?"High":"Low"," priority"]}),e.jsxs("div",{className:"relative",children:[e.jsxs("button",{type:"button",className:`flex items-center text-sm ${z?"text-indigo-600 bg-indigo-50 px-2 py-1 rounded-full":"text-gray-500"}`,onClick:()=>{R(!S),t(!1)},children:[e.jsx(ge,{size:16,className:"mr-1"}),z&&((B=d.find(c=>c.id===z))==null?void 0:B.name)||"Project"]}),S&&e.jsx("div",{className:"absolute left-0 top-8 z-10 bg-white rounded-md shadow-lg p-2 w-48 max-h-48 overflow-y-auto",children:d.map(c=>e.jsxs("div",{className:`flex items-center p-2 cursor-pointer hover:bg-gray-100 rounded ${z===c.id?"bg-indigo-50":""}`,onClick:()=>{k(z===c.id?null:c.id),R(!1)},children:[e.jsx("div",{className:"w-3 h-3 rounded-full mr-2",style:{backgroundColor:c.color}}),e.jsx("span",{className:"text-sm",children:c.name})]},c.id))})]}),e.jsxs("div",{className:"relative",children:[e.jsxs("button",{type:"button",className:`flex items-center text-sm ${P.length>0?"text-indigo-600 bg-indigo-50 px-2 py-1 rounded-full":"text-gray-500"}`,onClick:()=>{t(!l),R(!1)},children:[e.jsx(he,{size:16,className:"mr-1"}),P.length>0?`${P.length} ${P.length===1?"category":"categories"}`:"Categories"]}),l&&e.jsx("div",{className:"absolute left-0 top-8 z-10 bg-white rounded-md shadow-lg p-2 w-48 max-h-48 overflow-y-auto",children:i.map(c=>e.jsxs("div",{className:`flex items-center p-2 cursor-pointer hover:bg-gray-100 rounded ${P.includes(c.id)?"bg-indigo-50":""}`,onClick:()=>Q(c.id),children:[e.jsx("div",{className:"w-3 h-3 rounded-full mr-2",style:{backgroundColor:c.color}}),e.jsx("span",{className:"text-sm",children:c.name})]},c.id))})]}),e.jsxs("button",{type:"button",className:`flex items-center font-medium transition-all hover:scale-105 ${I()}`,onClick:()=>{a(b==="week"?"today":b==="today"?"month":b==="month"?"someday":"week")},children:[e.jsx(ue,{size:18,className:"mr-2"}),e.jsx("span",{className:"text-base",children:b==="today"?"🔥 Today":b==="week"?"📅 Week":b==="month"?"📌 Month":"🌊 Someday"})]}),e.jsxs("button",{type:"button",className:`flex items-center font-medium transition-all hover:scale-105 ${A()}`,onClick:()=>{r(s==="medium"?"low":s==="low"?"high":"medium")},children:[e.jsx(pe,{size:18,className:"mr-2"}),e.jsx("span",{className:"text-base",children:s==="low"?"🔋 Low":s==="medium"?"⚡ Med":"🚀 High"})]}),e.jsxs("button",{type:"button",className:`flex items-center font-medium transition-all hover:scale-105 ${K()}`,onClick:()=>{x(g==="neutral"?"easy":g==="easy"?"stressful":g==="stressful"?"dreading":"neutral")},children:[e.jsx(be,{size:18,className:"mr-2"}),e.jsx("span",{className:"text-base",children:g==="easy"?"😊 Love it":g==="neutral"?"😐 Neutral":g==="stressful"?"😩 Ugh":"😰 Dread"})]})]})})]})})},Ie=j=>{const h=new Date;h.setHours(0,0,0,0);const v=new Date(h);v.setDate(v.getDate()+1);const N=new Date(j);return N.setHours(0,0,0,0),N.getTime()===h.getTime()?"Today":N.getTime()===v.getTime()?"Tomorrow":N.toLocaleDateString("en-US",{month:"short",day:"numeric"})},Be=({projectId:j,onEditTask:h})=>{const{tasks:v,projects:N,categories:d,addTask:i,updateTask:u,deleteTask:D}=V(),[T,M]=o.useState("board"),f=j?v.filter(a=>a.projectId===j):v,y=f.filter(a=>!a.completed&&a.size==="large"&&!a.parentTaskId),z=f.filter(a=>{var g;return!a.completed&&a.parentTaskId===null&&a.size!=="large"&&((g=a.subtasks)==null?void 0:g.length)>0&&!a.subtasks.every(x=>{const s=v.find(r=>r.id===x);return s&&s.size==="small"})}),k=f.filter(a=>!a.completed&&a.parentTaskId===null&&a.size==="small"),P=f.filter(a=>!a.completed&&a.energyLevel==="high"),w=f.filter(a=>a.completed&&!a.archived),C=(a,g)=>{const x={...a};switch(g){case"backlog":x.size="large";break;case"planning":a.size==="large"&&(x.size="medium");break;case"ready":x.size="small";break;case"inProgress":x.energyLevel="high";break;case"done":x.completed=!0;break}u(x)},p=a=>{const g={title:`Subtask of ${a.title}`,description:"",completed:!1,archived:!1,projectId:a.projectId,categoryIds:[...a.categoryIds],parentTaskId:a.id,size:"small",priority:a.priority||"medium",energyLevel:"medium"},x=i(g);u({...a,subtasks:[...a.subtasks||[],x.id]})},b=(a,g,x,s,r)=>e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsxs("div",{className:`flex items-center p-2 ${r} rounded-t-lg`,children:[e.jsxs("div",{className:"flex items-center",children:[g,e.jsx("h3",{className:"font-bold text-gray-700 dark:text-gray-300 ml-2",children:a})]}),e.jsx("div",{className:"ml-2 bg-white dark:bg-gray-800 rounded-full px-2 py-0.5 text-xs font-medium text-gray-700 dark:text-gray-300",children:x.length})]}),e.jsxs("div",{className:"flex-grow bg-gray-50 dark:bg-gray-800 rounded-b-xl p-2 overflow-y-auto space-y-2",style:{minHeight:"300px"},children:[x.length===0?e.jsx("div",{className:"h-full flex items-center justify-center text-gray-400 text-sm",children:"No tasks"}):x.map(l=>e.jsxs("div",{className:"relative group",children:[e.jsx(O,{task:l,projects:N,categories:d,onEdit:h}),e.jsxs("div",{className:"absolute top-2 right-2 opacity-0 group-hover:opacity-100 transition-opacity flex space-x-1",children:[s!=="backlog"&&e.jsx("button",{className:"p-1 bg-gray-100 rounded hover:bg-gray-200",onClick:()=>C(l,"backlog"),title:"Move to Backlog",children:e.jsx(Ne,{size:14})}),s==="backlog"&&e.jsx("button",{className:"p-1 bg-blue-100 rounded hover:bg-blue-200",onClick:()=>C(l,"planning"),title:"Move to Planning",children:e.jsx(q,{size:14})}),s==="planning"&&e.jsxs(e.Fragment,{children:[e.jsx("button",{className:"p-1 bg-blue-100 rounded hover:bg-blue-200",onClick:()=>p(l),title:"Break Down",children:e.jsx(G,{size:14})}),e.jsx("button",{className:"p-1 bg-green-100 rounded hover:bg-green-200",onClick:()=>C(l,"ready"),title:"Mark as Ready",children:e.jsx(q,{size:14})})]}),s==="ready"&&e.jsx("button",{className:"p-1 bg-blue-100 dark:bg-blue-900/20 rounded-xl hover:bg-blue-200 dark:hover:bg-blue-900/40 transition-all hover:scale-105",onClick:()=>C(l,"inProgress"),title:"Start Work",children:e.jsx(q,{size:14})}),s==="inProgress"&&e.jsx("button",{className:"p-1 bg-green-100 rounded hover:bg-green-200",onClick:()=>C(l,"done"),title:"Complete",children:e.jsx(q,{size:14})})]})]},l.id)),s==="backlog"&&e.jsx("div",{className:"pt-2",children:e.jsx(de,{defaultProjectId:j})})]})]});return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Planning Board"}),e.jsx("div",{className:"flex space-x-2",children:e.jsxs("div",{className:"flex bg-gray-100 rounded-md p-1",children:[e.jsx("button",{className:`p-1 ${T==="board"?"bg-white rounded-md shadow-sm":""}`,onClick:()=>M("board"),title:"Board View",children:e.jsx(ye,{size:18})}),e.jsx("button",{className:`p-1 ${T==="list"?"bg-white rounded-md shadow-sm":""}`,onClick:()=>M("list"),title:"List View",children:e.jsx(ve,{size:18})})]})})]}),T==="board"?e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-5 gap-4",children:[b("Backlog",e.jsx(ie,{size:18,className:"text-gray-600"}),y,"backlog","bg-gray-100"),b("Planning",e.jsx(G,{size:18,className:"text-blue-600"}),z,"planning","bg-blue-100"),b("Ready",e.jsx(U,{size:18,className:"text-green-600"}),k,"ready","bg-green-100"),b("In Progress",e.jsx(F,{size:18,className:"text-blue-600 dark:text-blue-400"}),P,"inProgress","bg-blue-100 dark:bg-blue-900/20"),b("Done",e.jsx(F,{size:18,className:"text-gray-600"}),w,"done","bg-gray-100")]}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow p-4",children:[e.jsxs("h3",{className:"text-lg font-bold text-gray-900 mb-4 flex items-center",children:[e.jsx(ie,{size:18,className:"text-gray-600 mr-2"}),"Backlog"]}),e.jsxs("div",{className:"space-y-2",children:[y.length===0?e.jsx("div",{className:"text-gray-500 italic",children:"No tasks in backlog"}):y.map(a=>e.jsx(O,{task:a,projects:N,categories:d,onEdit:h,onDelete:D},a.id)),e.jsx("div",{className:"pt-2",children:e.jsx(de,{defaultProjectId:j})})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-4",children:[e.jsxs("h3",{className:"text-lg font-bold text-gray-900 mb-4 flex items-center",children:[e.jsx(G,{size:18,className:"text-blue-600 mr-2"}),"Planning"]}),e.jsx("div",{className:"space-y-2",children:z.length===0?e.jsx("div",{className:"text-gray-500 italic",children:"No tasks being planned"}):z.map(a=>e.jsxs("div",{className:"relative group",children:[e.jsx(O,{task:a,projects:N,categories:d,onEdit:h}),e.jsx("div",{className:"absolute top-2 right-12 opacity-0 group-hover:opacity-100 transition-opacity",children:e.jsx($,{variant:"secondary",size:"sm",icon:e.jsx(L,{size:14}),onClick:()=>p(a),children:"Add Subtask"})})]},a.id))})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-4",children:[e.jsxs("h3",{className:"text-lg font-bold text-gray-900 mb-4 flex items-center",children:[e.jsx(U,{size:18,className:"text-green-600 mr-2"}),"Ready"]}),e.jsx("div",{className:"space-y-2",children:k.length===0?e.jsx("div",{className:"text-gray-500 italic",children:"No tasks ready to work on"}):k.map(a=>e.jsx(O,{task:a,projects:N,categories:d,onEdit:h,onDelete:D},a.id))})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-4",children:[e.jsxs("h3",{className:"text-lg font-bold text-gray-900 mb-4 flex items-center",children:[e.jsx(F,{size:18,className:"text-blue-600 dark:text-blue-400 mr-2"}),"In Progress"]}),e.jsx("div",{className:"space-y-2",children:P.length===0?e.jsx("div",{className:"text-gray-500 italic",children:"No tasks in progress"}):P.map(a=>e.jsx(O,{task:a,projects:N,categories:d,onEdit:h,onDelete:D},a.id))})]})]})]})},Ae=({projectId:j,onClose:h})=>{const{addTask:v,projects:N,categories:d}=V(),[i,u]=o.useState(1),[D,T]=o.useState(""),[M,f]=o.useState(""),[y,z]=o.useState(""),[k,P]=o.useState(j||""),[w,C]=o.useState([]),[p,b]=o.useState([]),[a,g]=o.useState(""),[x,s]=o.useState(""),[r,l]=o.useState(""),[t,S]=o.useState(""),R=()=>{i<4&&u(i+1)},E=()=>{i>1&&u(i-1)},_=()=>{if(a.trim()){const n={id:Date.now().toString(),title:a,dueDate:x||y};b([...p,n]),g(""),s("")}},Q=n=>{C(I=>I.includes(n)?I.filter(A=>A!==n):[...I,n])},J=()=>{const I=v({title:D,description:M,dueDate:y,projectId:k||null,categoryIds:w,completed:!1,archived:!1,size:"large",priority:"high"}),A=[],K=[...p].sort((B,c)=>c.dueDate.localeCompare(B.dueDate));for(const B of K){const c={title:B.title,description:`Milestone for ${D}`,dueDate:B.dueDate,projectId:k||null,categoryIds:w,completed:!1,archived:!1,size:"medium",priority:"medium",parentTaskId:I.id},m=v(c);A.push(m.id),m.id}if(r){const B={title:r,description:t,dueDate:new Date().toISOString().split("T")[0],projectId:k||null,categoryIds:w,completed:!1,archived:!1,size:"small",priority:"high",energyLevel:"high",parentTaskId:I.id},c=v(B);A.push(c.id)}h&&h()};return e.jsxs("div",{className:"bg-white rounded-lg shadow p-4",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Backward Planning"}),e.jsx("p",{className:"text-gray-600",children:"Start with your end goal and work backward"})]}),e.jsx("div",{className:"relative mb-8",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:`flex flex-col items-center ${i>=1?"text-indigo-600":"text-gray-400"}`,children:[e.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center border-2 ${i>=1?"border-indigo-600 bg-indigo-50":"border-gray-300"}`,children:e.jsx($e,{size:16})}),e.jsx("span",{className:"text-xs mt-1",children:"Goal"})]}),e.jsx("div",{className:`flex-grow h-1 mx-2 ${i>=2?"bg-indigo-600":"bg-gray-300"}`}),e.jsxs("div",{className:`flex flex-col items-center ${i>=2?"text-indigo-600":"text-gray-400"}`,children:[e.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center border-2 ${i>=2?"border-indigo-600 bg-indigo-50":"border-gray-300"}`,children:e.jsx(te,{size:16})}),e.jsx("span",{className:"text-xs mt-1",children:"Timeline"})]}),e.jsx("div",{className:`flex-grow h-1 mx-2 ${i>=3?"bg-indigo-600":"bg-gray-300"}`}),e.jsxs("div",{className:`flex flex-col items-center ${i>=3?"text-indigo-600":"text-gray-400"}`,children:[e.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center border-2 ${i>=3?"border-indigo-600 bg-indigo-50":"border-gray-300"}`,children:e.jsx(ze,{size:16})}),e.jsx("span",{className:"text-xs mt-1",children:"Milestones"})]}),e.jsx("div",{className:`flex-grow h-1 mx-2 ${i>=4?"bg-indigo-600":"bg-gray-300"}`}),e.jsxs("div",{className:`flex flex-col items-center ${i>=4?"text-indigo-600":"text-gray-400"}`,children:[e.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center border-2 ${i>=4?"border-indigo-600 bg-indigo-50":"border-gray-300"}`,children:e.jsx(U,{size:16})}),e.jsx("span",{className:"text-xs mt-1",children:"First Step"})]})]})}),i===1&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"goalTitle",className:"block text-sm font-medium text-gray-700 mb-1",children:["What's your end goal? ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",id:"goalTitle",value:D,onChange:n=>T(n.target.value),className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm",placeholder:"e.g., Complete website redesign"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"goalDescription",className:"block text-sm font-medium text-gray-700 mb-1",children:"Describe what success looks like"}),e.jsx("textarea",{id:"goalDescription",value:M,onChange:n=>f(n.target.value),rows:3,className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm",placeholder:"What will be different when you're done?"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"project",className:"block text-sm font-medium text-gray-700 mb-1",children:"Project"}),e.jsxs("select",{id:"project",value:k,onChange:n=>P(n.target.value),className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm",children:[e.jsx("option",{value:"",children:"No Project"}),N.map(n=>e.jsx("option",{value:n.id,children:n.name},n.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Categories"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:d.map(n=>e.jsx("div",{className:`inline-flex items-center px-3 py-1 rounded-full text-sm cursor-pointer
                    ${w.includes(n.id)?"text-white":"text-gray-700 bg-opacity-25"}`,style:{backgroundColor:w.includes(n.id)?n.color:`${n.color}40`},onClick:()=>Q(n.id),children:e.jsx("span",{children:n.name})},n.id))})]})]}),i===2&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"targetDate",className:"block text-sm font-medium text-gray-700 mb-1",children:["When does this need to be completed? ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"date",id:"targetDate",value:y,onChange:n=>z(n.target.value),className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm"})]}),e.jsxs("div",{className:"bg-indigo-50 p-4 rounded-md",children:[e.jsx("h3",{className:"font-medium text-indigo-700 mb-2",children:"Planning backward"}),e.jsx("p",{className:"text-sm text-indigo-900",children:"We'll start with your target date and work backward, breaking down what needs to happen before the deadline. This approach works well for ADHD brains because it gives clear direction and makes the path to completion more visible."})]})]}),i===3&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-blue-50 p-4 rounded-md mb-4",children:[e.jsxs("h3",{className:"font-medium text-blue-700",children:["Working backward from: ",y]}),e.jsx("p",{className:"text-sm text-blue-900",children:"What major milestones need to happen before your deadline? Add them in any order."})]}),e.jsx("div",{className:"space-y-2",children:p.map((n,I)=>e.jsxs("div",{className:"flex items-center bg-gray-50 p-3 rounded-md",children:[e.jsx("span",{className:"font-medium",children:n.title}),e.jsx("span",{className:"ml-auto text-sm text-gray-500",children:n.dueDate}),e.jsx("button",{className:"ml-2 text-red-500 hover:text-red-700",onClick:()=>b(p.filter(A=>A.id!==n.id)),children:"✕"})]},n.id))}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("div",{className:"flex-grow",children:e.jsx("input",{type:"text",value:a,onChange:n=>g(n.target.value),className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm",placeholder:"Add a milestone"})}),e.jsx("div",{className:"flex-shrink-0 w-1/3",children:e.jsx("input",{type:"date",value:x,onChange:n=>s(n.target.value),className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm",placeholder:"Date"})}),e.jsx($,{variant:"secondary",size:"sm",icon:e.jsx(L,{size:16}),onClick:_,children:"Add"})]})]}),i===4&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-green-50 p-4 rounded-md mb-4",children:[e.jsx("h3",{className:"font-medium text-green-700",children:"What's the very first step?"}),e.jsx("p",{className:"text-sm text-green-900",children:"Define the very first actionable step you can take to start making progress today."})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"firstStepTitle",className:"block text-sm font-medium text-gray-700 mb-1",children:["First action ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",id:"firstStepTitle",value:r,onChange:n=>l(n.target.value),className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm",placeholder:"Something concrete you can do right away"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"firstStepDescription",className:"block text-sm font-medium text-gray-700 mb-1",children:"Details"}),e.jsx("textarea",{id:"firstStepDescription",value:t,onChange:n=>S(n.target.value),rows:2,className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm",placeholder:"Any details needed to get started"})]}),e.jsx("div",{className:"mt-2",children:e.jsx("p",{className:"text-sm text-gray-600",children:"This first step will be added as a high-priority, high-energy task for today."})})]}),e.jsxs("div",{className:"flex justify-between mt-8",children:[i>1?e.jsx($,{variant:"secondary",onClick:E,children:"Back"}):e.jsx("div",{}),i<4?e.jsx($,{variant:"primary",onClick:R,disabled:i===1&&!D||i===2&&!y,children:"Next"}):e.jsx($,{variant:"primary",icon:e.jsx(oe,{size:16}),onClick:J,disabled:!r,children:"Create Plan"})]})]})},Ee=({project:j,onClose:h})=>{const{addTask:v,categories:N}=V(),[d,i]=o.useState([]),[u,D]=o.useState(""),[T,M]=o.useState([]),f=["Planning","Research","Design","Development","Testing","Implementation","Review","Revision"],y=()=>{if(u.trim()){const s={id:se(),title:u,expanded:!0,tasks:[]};i([...d,s]),D("")}},z=s=>{const r={id:se(),title:s,expanded:!0,tasks:[]};i([...d,r])},k=s=>{i(d.map(r=>r.id===s?{...r,tasks:[...r.tasks,{id:se(),title:"New task"}]}:r))},P=(s,r)=>{i(d.map(l=>l.id===s?{...l,...r}:l))},w=(s,r,l)=>{i(d.map(t=>t.id===s?{...t,tasks:t.tasks.map(S=>S.id===r?{...S,...l}:S)}:t))},C=s=>{i(d.filter(r=>r.id!==s))},p=(s,r)=>{i(d.map(l=>l.id===s?{...l,tasks:l.tasks.filter(t=>t.id!==r)}:l))},b=s=>{i(d.map(r=>r.id===s?{...r,expanded:!r.expanded}:r))},a=s=>{M(r=>r.includes(s)?r.filter(l=>l!==s):[...r,s])},g=()=>{for(const s of d)for(const r of s.tasks){const l={title:r.title,description:r.description||"",completed:!1,archived:!1,projectId:j.id,categoryIds:T,parentTaskId:null,size:"medium",priority:"medium",energyLevel:"medium",tags:[s.title]};v(l)}h&&h()},x=s=>{const r=s.tasks.length>0;return e.jsxs("div",{className:"mb-4",children:[e.jsxs("div",{className:"bg-blue-50 p-3 rounded-md mb-2 relative group",children:[e.jsxs("div",{className:"flex items-center",children:[r&&e.jsx("button",{className:"mr-2 text-gray-500 hover:text-gray-700 focus:outline-none",onClick:()=>b(s.id),children:s.expanded?e.jsx(ke,{size:16}):e.jsx(we,{size:16})}),e.jsx("div",{className:"mr-2",children:e.jsx(F,{size:16,className:"text-blue-600"})}),e.jsx("input",{className:"flex-grow bg-transparent border-0 focus:ring-0 p-0 font-medium",value:s.title,onChange:l=>P(s.id,{title:l.target.value}),placeholder:"Phase name"}),e.jsxs("div",{className:"absolute right-2 top-1/2 transform -translate-y-1/2 opacity-0 group-hover:opacity-100 transition-opacity flex space-x-1",children:[e.jsx($,{variant:"ghost",size:"xs",icon:e.jsx(L,{size:14}),onClick:()=>k(s.id),children:"Task"}),e.jsx($,{variant:"ghost",size:"xs",className:"text-red-500 hover:text-red-700",icon:e.jsx(ne,{size:14}),onClick:()=>C(s.id),children:"Delete"})]})]}),e.jsx("div",{className:"mt-2",children:e.jsx("textarea",{className:"w-full text-sm bg-blue-50 border-0 focus:ring-0 resize-none",value:s.description||"",onChange:l=>P(s.id,{description:l.target.value}),placeholder:"Describe this phase (optional)...",rows:1,onInput:l=>{const t=l.target;t.style.height="auto",t.style.height=`${t.scrollHeight}px`}})})]}),s.expanded&&r&&e.jsx("div",{className:"pl-6 space-y-2",children:s.tasks.map(l=>e.jsxs("div",{className:"bg-green-50 p-3 rounded-md relative group",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"mr-2",children:e.jsx(U,{size:16,className:"text-green-600"})}),e.jsx("input",{className:"flex-grow bg-transparent border-0 focus:ring-0 p-0",value:l.title,onChange:t=>w(s.id,l.id,{title:t.target.value}),placeholder:"Task title"}),e.jsx("div",{className:"absolute right-2 top-1/2 transform -translate-y-1/2 opacity-0 group-hover:opacity-100 transition-opacity",children:e.jsx($,{variant:"ghost",size:"xs",className:"text-red-500 hover:text-red-700",icon:e.jsx(ne,{size:14}),onClick:()=>p(s.id,l.id),children:"Delete"})})]}),e.jsx("div",{className:"mt-2",children:e.jsx("textarea",{className:"w-full text-sm bg-green-50 border-0 focus:ring-0 resize-none",value:l.description||"",onChange:t=>w(s.id,l.id,{description:t.target.value}),placeholder:"Describe this task...",rows:1,onInput:t=>{const S=t.target;S.style.height="auto",S.style.height=`${S.scrollHeight}px`}})})]},l.id))})]},s.id)};return e.jsxs("div",{className:"space-y-6 bg-white rounded-lg shadow p-6",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-xl font-bold text-gray-900 mb-1",children:["Project Breakdown: ",j.name]}),e.jsx("p",{className:"text-gray-600",children:"Break down your project into phases and tasks"})]}),e.jsxs("div",{className:"bg-blue-50 p-4 rounded-md",children:[e.jsxs("h3",{className:"font-medium text-blue-700 flex items-center mb-2",children:[e.jsx(F,{size:18,className:"mr-2"}),"Project Phases"]}),e.jsx("p",{className:"text-sm text-blue-900 mb-3",children:"Start by dividing your project into phases or stages. Then add specific tasks to each phase."}),e.jsxs("div",{className:"flex space-x-2 mb-3",children:[e.jsx("input",{type:"text",value:u,onChange:s=>D(s.target.value),className:"flex-grow rounded-md border-blue-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm",placeholder:"Add a new phase"}),e.jsx($,{variant:"secondary",onClick:y,children:"Add Phase"})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-xs font-medium text-blue-800 mb-2",children:"Suggested phases:"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:f.map(s=>e.jsx("button",{className:"px-3 py-1 bg-white text-blue-700 rounded-full text-sm border border-blue-200 hover:bg-blue-100",onClick:()=>z(s),children:s},s))})]})]}),e.jsxs("div",{className:"space-y-2",children:[d.map(s=>x(s)),d.length===0&&e.jsx("div",{className:"text-center py-8 text-gray-500 italic",children:"Start by adding a project phase above"})]}),d.length>0&&d.some(s=>s.tasks.length>0)&&e.jsxs("div",{children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Categories"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:N.map(s=>e.jsx("div",{className:`inline-flex items-center px-3 py-1 rounded-full text-sm cursor-pointer
                    ${T.includes(s.id)?"text-white":"text-gray-700 bg-opacity-25"}`,style:{backgroundColor:T.includes(s.id)?s.color:`${s.color}40`},onClick:()=>a(s.id),children:e.jsx("span",{children:s.name})},s.id))})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx($,{variant:"primary",icon:e.jsx(oe,{size:16}),onClick:g,children:"Create Tasks"})})]})]})},Fe=({project:j,onClose:h})=>e.jsx(Ee,{project:j,onClose:h}),Re=()=>{const{projects:j,tasks:h,getDailyPlan:v,saveDailyPlan:N}=V(),[d,i]=o.useState("board"),[u,D]=o.useState(""),[T,M]=o.useState(!1),[f,y]=o.useState(null),z=Ce(new Date);v(z),o.useState(null),o.useState([]);const[k,P]=o.useState([]),[w,C]=o.useState([]),[p,b]=o.useState([]),a=j.filter(t=>h.some(S=>S.projectId===t.id&&!S.completed&&!S.archived)),g=j.find(t=>t.id===u),x=t=>{y(t||null),M(!0)},s=()=>{M(!1),y(null)},r=t=>{},l=(t,S)=>{};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col md:flex-row justify-between md:items-center bg-white rounded-lg shadow-sm p-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Planning Studio"}),e.jsx("p",{className:"text-gray-600",children:"Plan your projects and tasks in a way that works for your brain"})]}),e.jsx("div",{className:"mt-4 md:mt-0 flex space-x-2",children:e.jsx($,{variant:"primary",icon:e.jsx(L,{size:16}),onClick:()=>x(),children:"New Task"})})]}),e.jsxs("div",{className:"flex flex-wrap bg-white rounded-lg shadow-sm",children:[e.jsxs("button",{className:`flex items-center px-4 py-3 ${d==="board"?"bg-indigo-50 text-indigo-700 border-b-2 border-indigo-500":"text-gray-600 hover:bg-gray-50"}`,onClick:()=>i("board"),children:[e.jsx(Pe,{size:18,className:"mr-2"}),e.jsx("span",{children:"Planning Board"})]}),e.jsxs("button",{className:`flex items-center px-4 py-3 ${d==="backward"?"bg-indigo-50 text-indigo-700 border-b-2 border-indigo-500":"text-gray-600 hover:bg-gray-50"}`,onClick:()=>i("backward"),children:[e.jsx(U,{size:18,className:"mr-2"}),e.jsx("span",{children:"Backward Planning"})]}),e.jsxs("button",{className:`flex items-center px-4 py-3 ${d==="breakdown"?"bg-indigo-50 text-indigo-700 border-b-2 border-indigo-500":"text-gray-600 hover:bg-gray-50"}`,onClick:()=>i("breakdown"),children:[e.jsx(G,{size:18,className:"mr-2"}),e.jsx("span",{children:"Project Breakdown"})]}),e.jsxs("button",{className:`flex items-center px-4 py-3 ${d==="timeBlock"?"bg-indigo-50 text-indigo-700 border-b-2 border-indigo-500":"text-gray-600 hover:bg-gray-50"}`,onClick:()=>i("timeBlock"),children:[e.jsx(F,{size:18,className:"mr-2"}),e.jsx("span",{children:"Time Blocking"})]})]}),(d==="board"||d==="breakdown")&&e.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-4",children:[e.jsx("label",{htmlFor:"projectSelect",className:"block text-sm font-medium text-gray-700 mb-2",children:"Select Project"}),e.jsxs("select",{id:"projectSelect",value:u,onChange:t=>D(t.target.value),className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm",children:[e.jsx("option",{value:"",children:"All Projects"}),a.map(t=>e.jsx("option",{value:t.id,children:t.name},t.id))]})]}),e.jsxs("div",{children:[d==="board"&&e.jsx(Be,{projectId:u||void 0,onEditTask:x}),d==="backward"&&e.jsx(Ae,{projectId:u||void 0}),d==="breakdown"&&g&&e.jsx(Fe,{project:g}),d==="breakdown"&&!g&&e.jsx(Se,{children:e.jsxs("div",{className:"text-center py-8",children:[e.jsx(Me,{size:48,className:"mx-auto text-gray-400 mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-1",children:"Select a Project"}),e.jsx("p",{className:"text-gray-600",children:"Please select a project to use the breakdown planning tool"})]})}),d==="timeBlock"&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[e.jsxs("h2",{className:"text-xl font-bold text-gray-900 mb-4 flex items-center",children:[e.jsx(te,{size:20,className:"mr-2 text-indigo-500"}),"Today's Time Blocks"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"bg-blue-50 rounded-lg p-4",children:[e.jsx("h3",{className:"font-medium text-gray-900 mb-2",children:"Morning"}),e.jsx("div",{className:"min-h-[200px] bg-white rounded-lg p-3 border-2 border-dashed border-blue-200",onDragOver:t=>t.preventDefault(),onDrop:()=>l(),children:k.length===0?e.jsx("div",{className:"text-center py-4 text-gray-400 italic",children:"Drop tasks here"}):e.jsx("div",{className:"space-y-2",children:k.map(t=>e.jsx("div",{className:"bg-blue-100 p-2 rounded",draggable:!0,onDragStart:()=>r(t.id),children:t.title},t.id))})})]}),e.jsxs("div",{className:"bg-yellow-50 rounded-lg p-4",children:[e.jsx("h3",{className:"font-medium text-gray-900 mb-2",children:"Afternoon"}),e.jsx("div",{className:"min-h-[200px] bg-white rounded-lg p-3 border-2 border-dashed border-yellow-200",onDragOver:t=>t.preventDefault(),onDrop:()=>l(),children:w.length===0?e.jsx("div",{className:"text-center py-4 text-gray-400 italic",children:"Drop tasks here"}):e.jsx("div",{className:"space-y-2",children:w.map(t=>e.jsx("div",{className:"bg-yellow-100 p-2 rounded",draggable:!0,onDragStart:()=>r(t.id),children:t.title},t.id))})})]}),e.jsxs("div",{className:"bg-purple-50 rounded-lg p-4",children:[e.jsx("h3",{className:"font-medium text-gray-900 mb-2",children:"Evening"}),e.jsx("div",{className:"min-h-[200px] bg-white rounded-lg p-3 border-2 border-dashed border-purple-200",onDragOver:t=>t.preventDefault(),onDrop:()=>l(),children:p.length===0?e.jsx("div",{className:"text-center py-4 text-gray-400 italic",children:"Drop tasks here"}):e.jsx("div",{className:"space-y-2",children:p.map(t=>e.jsx("div",{className:"bg-purple-100 p-2 rounded",draggable:!0,onDragStart:()=>r(t.id),children:t.title},t.id))})})]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[e.jsx("h2",{className:"text-lg font-bold text-gray-900 mb-4",children:"Available Tasks"}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-3",children:h.filter(t=>!t.completed&&!t.archived).slice(0,12).map(t=>e.jsxs("div",{className:"bg-gray-50 p-3 rounded-lg shadow-sm",draggable:!0,onDragStart:()=>r(t.id),children:[e.jsx("h3",{className:"font-medium text-gray-800",children:t.title}),t.dueDate&&e.jsxs("p",{className:"text-xs text-gray-500",children:["Due: ",t.dueDate]})]},t.id))})]})]})]}),e.jsx(De,{isOpen:T,onClose:s,title:f?"Edit Task":"Create New Task",size:"3xl",children:e.jsx(Te,{task:f||void 0,onClose:s,isEdit:!!f})})]})};export{Re as default};
//# sourceMappingURL=EnhancedPlanningPage-a9deebe8.js.map
