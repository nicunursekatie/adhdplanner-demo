import{c as $,a as E,r as o,g as P,j as e,B as i,q as j,E as I,m as q,k as v,C as D,f as u,o as B,T as L,X as O,M as w,s as F,af as H,ag as W,ah as X}from"./main-3602d384.js";/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C=$("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]),G=()=>{const{projects:T,categories:z,tasks:A,setTasks:M}=E(),[d,p]=o.useState([]),[b,x]=o.useState(!1),[l,m]=o.useState(null),[R,h]=o.useState(!1);o.useEffect(()=>{f()},[]);const f=()=>{const t=P().sort((r,a)=>new Date(a.deletedAt).getTime()-new Date(r.deletedAt).getTime());p(t)},k=s=>{const t=H(s);if(t){const r=[...A,t];M(r),f()}},g=s=>{W(s),f()},S=()=>{X(),p([]),x(!1)},y=s=>{const t=new Date(s),a=Math.abs(new Date().getTime()-t.getTime()),n=Math.floor(a/(1e3*60*60*24));if(n===0){const c=Math.floor(a/36e5);if(c===0){const N=Math.floor(a/6e4);return`${N} minute${N!==1?"s":""} ago`}return`${c} hour${c!==1?"s":""} ago`}else{if(n===1)return"Yesterday";if(n<7)return`${n} days ago`;if(n<30){const c=Math.floor(n/7);return`${c} week${c!==1?"s":""} ago`}else return u(t)}};return e.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Recently Deleted"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Tasks are kept for 30 days before permanent deletion"})]}),d.length>0&&e.jsx(i,{variant:"danger",onClick:()=>x(!0),icon:e.jsx(j,{size:16}),children:"Clear All"})]}),d.length===0?e.jsx(I,{title:"No deleted tasks",description:"Tasks you delete will appear here for 30 days",icon:e.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center",children:e.jsx(j,{size:32,className:"text-gray-400"})})}):e.jsx("div",{className:"space-y-4",children:d.map(s=>{const t=s.task.projectId?T.find(a=>a.id===s.task.projectId):null,r=z.filter(a=>{var n;return(n=s.task.categoryIds)==null?void 0:n.includes(a.id)});return e.jsx(q,{className:"hover:shadow-md transition-shadow cursor-pointer",onClick:()=>{m(s),h(!0)},children:e.jsx("div",{className:"p-4",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-medium text-gray-900",children:s.task.title}),e.jsxs("div",{className:"flex items-center gap-4 mt-2 text-sm text-gray-500",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(v,{size:14,className:"mr-1"}),"Deleted ",y(s.deletedAt)]}),s.task.dueDate&&e.jsxs("div",{className:"flex items-center",children:[e.jsx(D,{size:14,className:"mr-1"}),"Was due ",u(new Date(s.task.dueDate))]}),t&&e.jsxs("div",{className:"flex items-center",children:[e.jsx(B,{size:14,className:"mr-1",style:{color:t.color}}),e.jsx("span",{style:{color:t.color},children:t.name})]})]}),r.length>0&&e.jsxs("div",{className:"flex items-center gap-1 mt-2",children:[e.jsx(L,{size:14,className:"text-gray-400"}),r.map(a=>e.jsx("span",{className:"text-xs px-2 py-0.5 rounded-full",style:{backgroundColor:a.color+"20",color:a.color},children:a.name},a.id))]})]}),e.jsxs("div",{className:"flex gap-2 ml-4",children:[e.jsx(i,{size:"sm",variant:"secondary",onClick:a=>{a.stopPropagation(),k(s.task.id)},icon:e.jsx(C,{size:14}),children:"Restore"}),e.jsx(i,{size:"sm",variant:"outline",onClick:a=>{a.stopPropagation(),g(s.task.id)},icon:e.jsx(O,{size:14}),children:"Delete"})]})]})})},s.task.id)})}),e.jsx(w,{isOpen:R,onClose:()=>{h(!1),m(null)},title:"Deleted Task Details",children:l&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-gray-900",children:l.task.title}),l.task.description&&e.jsx("p",{className:"mt-2 text-gray-600",children:l.task.description})]}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex items-center text-gray-500",children:[e.jsx(v,{size:16,className:"mr-2"}),"Deleted ",y(l.deletedAt)]}),l.task.dueDate&&e.jsxs("div",{className:"flex items-center text-gray-500",children:[e.jsx(D,{size:16,className:"mr-2"}),"Due date was ",u(new Date(l.task.dueDate))]})]}),e.jsxs("div",{className:"flex gap-3 pt-4 border-t",children:[e.jsx(i,{variant:"primary",onClick:()=>{k(l.task.id),h(!1),m(null)},icon:e.jsx(C,{size:16}),children:"Restore Task"}),e.jsx(i,{variant:"danger",onClick:()=>{g(l.task.id),h(!1),m(null)},icon:e.jsx(j,{size:16}),children:"Delete Permanently"})]})]})}),e.jsx(w,{isOpen:b,onClose:()=>x(!1),title:"Clear All Deleted Tasks",size:"sm",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center text-red-600",children:[e.jsx(F,{size:20,className:"mr-2"}),e.jsx("p",{className:"font-medium",children:"This action cannot be undone!"})]}),e.jsxs("p",{className:"text-gray-600",children:["Are you sure you want to permanently delete all ",d.length," tasks? They will be removed forever and cannot be recovered."]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[e.jsx(i,{variant:"secondary",onClick:()=>x(!1),children:"Cancel"}),e.jsx(i,{variant:"danger",onClick:S,icon:e.jsx(j,{size:16}),children:"Clear All"})]})]})})]})};export{G as default};
//# sourceMappingURL=DeletedTasksPage-d7205eee.js.map
